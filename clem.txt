2015-08-28 17:20:17.406268233 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:20:17.406290147 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:20:17.406303124 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:17.406338305 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:20:17.406353282 +0200 CEST [web-1]   [1m[36mUser Load (3.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:17.406367795 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:20:17 +0000
2015-08-28 17:20:17.406397604 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:20:17.406432881 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 11.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f351402c3a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-22-13stei9.pdf>, @original_filename="cours copy 11.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 11.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:20:17.406445994 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:20:17.406465137 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:20:17.40647848 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:17.406497218 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:20:17.406524177 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:20:17.406545767 +0200 CEST [web-1] true
2015-08-28 17:20:17.406558846 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:17.406573685 +0200 CEST [web-1]   [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1  [["subdomain", "lycee-kleber"]]
2015-08-28 17:20:17.406585923 +0200 CEST [web-1]   [1m[36mOrganization Load (1.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:20:17.406600843 +0200 CEST [web-1]   [1m[35mNode Exists (2.1ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:20:17.406613042 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:20:17.406645463 +0200 CEST [web-1]   [1m[35mChapter Exists (0.5ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:20:17.40666356 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:20:17.406679055 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:17.406691561 +0200 CEST [web-1] Completed 500 Internal Server Error in 105ms (ActiveRecord: 4.8ms)
2015-08-28 17:20:17.406705859 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:17.406717946 +0200 CEST [web-1] Completed 500 Internal Server Error in 104ms (ActiveRecord: 5.6ms)
2015-08-28 17:20:17.406732582 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:17.406744249 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=3047abce-a29c-48c3-985e-8fd6870738da (only available if report was successful)
2015-08-28 17:20:17.406774027 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:17.406792147 +0200 CEST [web-1] 
2015-08-28 17:20:17.406807335 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:17.406819473 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:17.406833709 +0200 CEST [web-1] 
2015-08-28 17:20:17.406848665 +0200 CEST [web-1] 
2015-08-28 17:20:17.406863744 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:17.40687598 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:20:17 +0000
2015-08-28 17:20:17.406927583 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:17.406950808 +0200 CEST [web-1] Completed 500 Internal Server Error in 105ms (ActiveRecord: 5.4ms)
2015-08-28 17:20:17.406966886 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:17.406978973 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:18.407168914 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:20:18.407262285 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:18.407302814 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.407317547 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:18.40734609 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.407391927 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775217, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>32}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"6248e25b-0b6f-4bbd-a0f2-254a1a738eb7", :request=>{:params=>{"title"=>"cours copy 12.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 12.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-32-1p7c5eg.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 12.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"0fcf654e-e88b-4ddc-a4f4-4462f0cade06"}, :person=>{}}}
2015-08-28 17:20:18.407526349 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:18.407549393 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 10.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f3520378ca8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-18-mznhkp.pdf>, @original_filename="cours copy 10.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 10.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:20:18.407581593 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:20:18.407639014 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:18.407736364 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775217, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>18}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"11c5cd4a-aeaf-462a-ac0c-7cd696d5be70", :request=>{:params=>{"title"=>"cours copy 9.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 9.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-18-l54fmu.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 9.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"a51c3809-8710-4791-b51e-8102e66c5865"}, :person=>{}}}
2015-08-28 17:20:18.407846782 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:18.407899876 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:20:18.407917762 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:18.407933024 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:20:18.407982734 +0200 CEST [web-1]   [1m[36mUser Load (1.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:18.408063091 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:18.40811117 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.408169968 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775217, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>22}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"592d20f4-2e29-4e9d-8de0-e54fee7fa4a7", :request=>{:params=>{"title"=>"cours copy 11.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 11.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-22-13stei9.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 11.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"89a91470-412f-49ee-9c3f-d8fd0e76b5ff"}, :person=>{}}}
2015-08-28 17:20:18.408240865 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:18.408267723 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:18.40829288 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.408322378 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.408345066 +0200 CEST [web-1]   [1m[35mOrganization Exists (103.9ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:20:18.408379706 +0200 CEST [web-1] true
2015-08-28 17:20:18.408417535 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:18.408446552 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m  [["subdomain", "lycee-kleber"]]
2015-08-28 17:20:18.408463834 +0200 CEST [web-1]   [1m[35mOrganization Load (0.5ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:20:18.408476093 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:20:18.408506148 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:20:18.408519018 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:20:18.40853494 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:20:18.408547301 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.408564627 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:18.408576752 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:18.408599476 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=388a0562-89a9-4cd8-a017-bdcea4a12bbe (only available if report was successful)
2015-08-28 17:20:18.408636789 +0200 CEST [web-1] 
2015-08-28 17:20:18.408664038 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:18.408676303 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:18.408703195 +0200 CEST [web-1] 
2015-08-28 17:20:18.408731267 +0200 CEST [web-1] 
2015-08-28 17:20:18.408757349 +0200 CEST [web-1] Completed 500 Internal Server Error in 213ms (ActiveRecord: 106.2ms)
2015-08-28 17:20:18.408769904 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:18.40878858 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:18.408817244 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:18.408841665 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.408854421 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775217, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>18}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"86531782-10ab-4f0f-ba29-d91ac95e10e4", :request=>{:params=>{"title"=>"cours copy 10.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 10.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-18-mznhkp.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 10.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"691dc3e0-b38f-478d-8f94-d770ad40d3a7"}, :person=>{}}}
2015-08-28 17:20:18.408940745 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:18.408966242 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:18.408984006 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:18.409045964 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:18.409075002 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=3702faf6-e6dc-4f6f-b843-f9adcca5ce47 (only available if report was successful)
2015-08-28 17:20:18.409164239 +0200 CEST [web-1] 
2015-08-28 17:20:18.409193803 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:18.409247046 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:18.409288398 +0200 CEST [web-1] 
2015-08-28 17:20:18.409392888 +0200 CEST [web-1] 
2015-08-28 17:20:18.409491258 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:18.409599657 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=81aa1f47-513b-4d93-93a6-f9a696d4a50c (only available if report was successful)
2015-08-28 17:20:18.409686432 +0200 CEST [web-1] 
2015-08-28 17:20:18.409729631 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:18.409759923 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:18.409807665 +0200 CEST [web-1] 
2015-08-28 17:20:18.40983736 +0200 CEST [web-1] 
2015-08-28 17:20:18.409870877 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:20:18 +0000
2015-08-28 17:20:18.409919474 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:20:18.409951267 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 13.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f3520c91038 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-32-1ks15sn.pdf>, @original_filename="cours copy 13.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 13.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:20:18.409973568 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:20:18.409998418 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:20:18.410025714 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:18.410060981 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:20:18.41009045 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.5ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:20:18.410125764 +0200 CEST [web-1] true
2015-08-28 17:20:18.41015334 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:18.410189121 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m  [["subdomain", "lycee-kleber"]]
2015-08-28 17:20:18.410216963 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:20:18.410248897 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:20:18.410275708 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:20:18.410310513 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:20:18.410345898 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:20:18.410376653 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:19.410516134 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:19.410640041 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=0b77f914-7e7b-46f6-a11c-f8cacfe935de (only available if report was successful)
2015-08-28 17:20:19.410671473 +0200 CEST [web-1] 
2015-08-28 17:20:19.410685644 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:19.410700941 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:19.410712937 +0200 CEST [web-1] 
2015-08-28 17:20:19.410732615 +0200 CEST [web-1] 
2015-08-28 17:20:19.410768747 +0200 CEST [web-1] Completed 500 Internal Server Error in 105ms (ActiveRecord: 2.9ms)
2015-08-28 17:20:19.410806698 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:19.410821213 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:19.410845969 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:19.410884377 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:19.411023473 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775218, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>32}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"38a76f9d-7f7c-4da1-9d91-f8ea21d80fe6", :request=>{:params=>{"title"=>"cours copy 13.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 13.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-32-1ks15sn.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 13.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"bbc28900-faee-4d83-aebc-ddde343e06c8"}, :person=>{}}}
2015-08-28 17:20:19.411154946 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:19.411183786 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:19.411200584 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:19.411212722 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=a29803f8-04d5-4a2f-afa5-cafa897e2b4e (only available if report was successful)
2015-08-28 17:20:19.411256143 +0200 CEST [web-1] 
2015-08-28 17:20:19.411269122 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:19.411283635 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:19.411311541 +0200 CEST [web-1] 
2015-08-28 17:20:19.411326805 +0200 CEST [web-1] 
2015-08-28 17:20:19.411338708 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:19.411375849 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:20:18 +0000
2015-08-28 17:20:19.411388559 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:20:19.411403758 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 14.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f350c2d3bb8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-18-zrmebh.pdf>, @original_filename="cours copy 14.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 14.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:20:19.411441945 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:20:19.411458286 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:20:19.411470319 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:19.411484686 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:20:19.411547095 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:20:19.411590093 +0200 CEST [web-1] true
2015-08-28 17:20:19.411614102 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:19.411641446 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m  [["subdomain", "lycee-kleber"]]
2015-08-28 17:20:19.411654133 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:20:19.411668837 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:20:19.411719162 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:20:19.411735601 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:20:19.41174772 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:20:19.411770418 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:19.411800219 +0200 CEST [web-1] Completed 500 Internal Server Error in 103ms (ActiveRecord: 2.7ms)
2015-08-28 17:20:19.411858888 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:19.411886587 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:19.411914631 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:19.411928646 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:19.411948213 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775219, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>18}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"8544339e-ca8d-4a83-8dd9-7a841ad3c701", :request=>{:params=>{"title"=>"cours copy 14.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 14.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-18-zrmebh.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 14.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"80eb90bb-39cd-4d1e-a050-a3d55867287a"}, :person=>{}}}
2015-08-28 17:20:19.412052868 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:19.41211291 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:19.412140509 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:19.412153124 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:19.412167005 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=9223e21e-0d6d-4fc6-a331-c32a3e3dd541 (only available if report was successful)
2015-08-28 17:20:19.412178713 +0200 CEST [web-1] 
2015-08-28 17:20:19.41219282 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:19.412215544 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:19.41222978 +0200 CEST [web-1] 
2015-08-28 17:20:19.412265497 +0200 CEST [web-1] 
2015-08-28 17:20:20.412404263 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:20:19 +0000
2015-08-28 17:20:20.412498366 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:20:20.412584196 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 15.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f350c3d3018 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-22-ooq295.pdf>, @original_filename="cours copy 15.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 15.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:20:20.412628918 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:20:20.412675302 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:20:20.412689267 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:20.412704114 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:20:20.412715788 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:20:20.41273055 +0200 CEST [web-1] true
2015-08-28 17:20:20.412742263 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:20:20.41277768 +0200 CEST [web-1]   [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1  [["subdomain", "lycee-kleber"]]
2015-08-28 17:20:20.412797843 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:20:20.412813532 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:20:20.41283226 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:20:20.412846936 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:20:20.412862578 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:20:20.412881909 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:20.412915481 +0200 CEST [web-1] Completed 500 Internal Server Error in 101ms (ActiveRecord: 2.5ms)
2015-08-28 17:20:20.412957358 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `id' for nil:NilClass
2015-08-28 17:20:20.412981786 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:20:20.412997585 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:20:20.413051387 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:20.413135365 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775219, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>22}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>13, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `id' for nil:NilClass"}, :extra=>{}}}, :uuid=>"fe8b4c51-2afc-4d34-bb40-80d1018169da", :request=>{:params=>{"title"=>"cours copy 15.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 15.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-22-ooq295.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 15.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"sjVExNztgjOseBmo7CCVBw", "Expiry"=>"1503933585", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"yw7xAqjZxrju7TGGK6Uk/kfM/4zUhZW+cNkqQKIyPXEDhlST2NNbwhFFBeT2eIQUPGetnIDDff8HVjZ95azfZQ==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"15bcb49c-876d-4890-82ba-556bccdfd45e"}, :person=>{}}}
2015-08-28 17:20:20.413234965 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:20:20.413253498 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:20:20.413268766 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:20:20.413333234 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:20.413357856 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=163d618c-7820-4ecf-9e94-c75ddbce6baf (only available if report was successful)
2015-08-28 17:20:20.413411731 +0200 CEST [web-1] 
2015-08-28 17:20:20.413435271 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:20.413447772 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:20.413462022 +0200 CEST [web-1] 
2015-08-28 17:20:20.413473418 +0200 CEST [web-1] 
2015-08-28 17:20:21.413633026 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:20:21.413736922 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=d17ae88d-de45-4e49-8162-16a8906feb01 (only available if report was successful)
2015-08-28 17:20:21.413797368 +0200 CEST [web-1] 
2015-08-28 17:20:21.41382244 +0200 CEST [web-1] NoMethodError (undefined method `id' for nil:NilClass):
2015-08-28 17:20:21.413839282 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:13:in `create'
2015-08-28 17:20:21.413873129 +0200 CEST [web-1] 
2015-08-28 17:20:21.413899444 +0200 CEST [web-1] 
2015-08-28 17:28:38.477194502 +0200 CEST [web-1] Started GET "/" for 78.230.115.176 at 2015-08-28 15:28:38 +0000
2015-08-28 17:28:38.477350899 +0200 CEST [web-1] Processing by AngularController#index as HTML
2015-08-28 17:28:38.477490987 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:38.477580926 +0200 CEST [web-1]   Rendered angular/index.html.erb within layouts/normalApp (0.1ms)
2015-08-28 17:28:38.477606903 +0200 CEST [web-1] Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)
2015-08-28 17:28:39.477778539 +0200 CEST [web-1] Started GET "/organization" for 78.230.115.176 at 2015-08-28 15:28:38 +0000
2015-08-28 17:28:39.477894345 +0200 CEST [web-1] Processing by OrganizationsController#show as JSON
2015-08-28 17:28:39.477945451 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:39.478004488 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:39.478027144 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:39.478040216 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.5ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1
2015-08-28 17:28:39.47807118 +0200 CEST [web-1] true
2015-08-28 17:28:39.478136004 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:39.478178468 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:39.478224123 +0200 CEST [web-1] Started GET "/nodes" for 78.230.115.176 at 2015-08-28 15:28:38 +0000
2015-08-28 17:28:39.478271621 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:28:39.478297668 +0200 CEST [web-1] Processing by NodesController#index as JSON
2015-08-28 17:28:39.478332586 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:39.478354264 +0200 CEST [web-1] Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms)
2015-08-28 17:28:39.478386435 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:39.478408454 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:39.478438483 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1
2015-08-28 17:28:39.478483357 +0200 CEST [web-1] true
2015-08-28 17:28:39.478528011 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:39.478543422 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:39.478558759 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:28:39.47859636 +0200 CEST [web-1]   [1m[36mNode Load (0.9ms)[0m  [1mSELECT `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 2[0m
2015-08-28 17:28:39.478612217 +0200 CEST [web-1] Completed 200 OK in 9ms (Views: 2.6ms | ActiveRecord: 1.6ms)
2015-08-28 17:28:41.478887798 +0200 CEST [web-1] Started GET "/organization/is_signed_up?email=celine.bellier@ac-strasbourg.fr" for 78.230.115.176 at 2015-08-28 15:28:41 +0000
2015-08-28 17:28:41.478973505 +0200 CEST [web-1] Processing by OrganizationsController#is_signed_up? as JSON
2015-08-28 17:28:41.479018257 +0200 CEST [web-1]   Parameters: {"email"=>"celine.bellier@ac-strasbourg.fr"}
2015-08-28 17:28:41.47903212 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:41.4790469 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:41.479058835 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:41.479073831 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1
2015-08-28 17:28:41.47908557 +0200 CEST [web-1] true
2015-08-28 17:28:41.479102717 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:41.479152196 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:41.479168479 +0200 CEST [web-1]   [1m[35mOrganization Load (0.5ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:28:41.479180232 +0200 CEST [web-1]   [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `users` INNER JOIN `organizationsuserslinks` ON `users`.`id` = `organizationsuserslinks`.`user_id` WHERE `organizationsuserslinks`.`organization_id` = 2 AND `users`.`email` = 'celine.bellier@ac-strasbourg.fr' LIMIT 1[0m
2015-08-28 17:28:41.479201505 +0200 CEST [web-1] Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms)
2015-08-28 17:28:42.479352276 +0200 CEST [web-1] Started POST "/auth/sign_in" for 78.230.115.176 at 2015-08-28 15:28:41 +0000
2015-08-28 17:28:42.479420616 +0200 CEST [web-1] Processing by DeviseTokenAuth::SessionsController#create as JSON
2015-08-28 17:28:42.479461459 +0200 CEST [web-1]   Parameters: {"email"=>"celine.bellier@ac-strasbourg.fr", "password"=>"[FILTERED]", "session"=>{"email"=>"celine.bellier@ac-strasbourg.fr", "password"=>"[FILTERED]"}}
2015-08-28 17:28:42.479480992 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:28:42.479496588 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:42.47950882 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE (BINARY uid = 'celine.bellier@ac-strasbourg.fr' AND provider='email')  ORDER BY `users`.`id` ASC LIMIT 1[0m
2015-08-28 17:28:42.479531242 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:28:42.479544906 +0200 CEST [web-1]   [1m[36mSQL (0.8ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"gYJQ8c6uyDVIZKAT8vkPUA\":{\"token\":\"$2a$10$Af1JXaI0q4stgURcNaciK.v/6IcbwKL9pFszWI3tyhwYeaiKzm6ZC\",\"expiry\":1503595168,\"last_token\":\"$2a$10$7tyT6zdIF1MDLmtn8QrgjOmcPtNCcmzkbN9UxJmShKwpajPrRtcDa\",\"updated_at\":\"2015-08-24T17:19:28.936+00:00\"},\"Qx06WXT3WCr6gVnP7Y-ZlA\":{\"token\":\"$2a$10$0GTxVDJNvI6EysFK4Gv4deH6CqxvlgyEFZxNBtV6wEtjuTg1T5OQ6\",\"expiry\":1503840324,\"last_token\":\"$2a$10$ccXsSnAQKB0ITmb5uOfnJe828E1QwDyoT80XfL48E.i3cgaiEqn8y\",\"updated_at\":\"2015-08-27T13:25:24.870+00:00\"},\"2f1egQaRcmQz4YqmdVFQNQ\":{\"token\":\"$2a$10$tacuHIH.cKxUOt3CNiL4b.3SW/wVnAw1vRZ//D3/evwglwXql3wKC\",\"expiry\":1503868921,\"last_token\":\"$2a$10$iZof4/lEoUywk4aQQW/n0.HRP3.XH0BBmpS7sHWQ9Q/3DcLp6Qvg6\",\"updated_at\":\"2015-08-27T21:22:01.811+00:00\"},\"lo7WTWsUscpDtE2bB6VcgQ\":{\"token\":\"$2a$10$ievlhwoyXoLOOqWX0Mgwoe3KZargrw1zxWKiHemQ2m5.iXDwIfEnK\",\"expiry\":1503869903,\"last_token\":\"$2a$10$MALc0NGWhuPo4hnNUnzeiu0gzGhDT99XE1HeW1uWcu9vM/ag/fjsu\",\"updated_at\":\"2015-08-27T21:38:24.281+00:00\"},\"2i0u0DlrmKBjlnUJ94cNmQ\":{\"token\":\"$2a$10$Xm7F7x8YDz43dfgsznxSb.eHobk.4JpxXcKJmxz5uimm3LrfWJYUa\",\"expiry\":1503911459,\"last_token\":\"$2a$10$mBXBte6TUhWqE26PdwpUsOa.7bcvXYgYuqPTG1MCb96SsibrW4b/a\",\"updated_at\":\"2015-08-28T09:10:59.656+00:00\"},\"lDKbXY3WL_KccP0DskdI5w\":{\"token\":\"$2a$10$IphHCotxyFO7OyxIWj5Y.eZcdZuCIE0XmyJ4Yj4UUjgMqLqSNGo5C\",\"expiry\":1503912549,\"last_token\":\"$2a$10$IBjGV1VSKJDuiVWU/E4XdOOMQLOnkFqPCHP/AB/MZRNY/2ULMlBPO\",\"updated_at\":\"2015-08-28T09:29:09.288+00:00\"},\"a4kdy5veciGtB4HllPSTWw\":{\"token\":\"$2a$10$YJHEbCLJUduxEC7yIyGE1etZhACQEgraX9oJ.jP9U9LLmxkZtUngO\",\"expiry\":1503912670,\"last_token\":\"$2a$10$NaIynSGzTJeDw.enLU5j9OlM6SV/Z3b5xjZZzd6BzbdLWpt6h7rye\",\"updated_at\":\"2015-08-28T09:31:10.819+00:00\"},\"_7VMaoJ-dQHKRMIVsZHClw\":{\"token\":\"$2a$10$QJpPbvtSWsaYk1dCNpcwVOFBrhKWRb8gdAPiDkrVvIzlAZCoEyIUq\",\"expiry\":1503915588,\"last_token\":\"$2a$10$RZWqjZu.7lJnT22zcoDkPeD6riqNUoC.VHC9Qt6.7Qwwl9VhmGLuq\",\"updated_at\":\"2015-08-28T10:19:48.649+00:00\"},\"hDJbltbcP6swIIMHvvuYEw\":{\"token\":\"$2a$10$7C6lfs.z/.25wFZg80ftH.tEjUUFhlRaB8lITT9gCaSxj1koaciGm\",\"expiry\":1503915673,\"last_token\":\"$2a$10$pkq0mqQpn0dYJoLMhKYKperVTmy1IUVhAt67TzHoZ2UQ97Y9LpwES\",\"updated_at\":\"2015-08-28T10:21:13.269+00:00\"},\"JDCkYfAZ9OLVnBG4Wdum6w\":{\"token\":\"$2a$10$EL184j8DzbST9DmNWFNzBO2BAO6HfLCIkngWkEeTteYBEFtqY/20O\",\"expiry\":1503915746,\"last_token\":\"$2a$10$cTqaQhEZvbrW5nBdWidBSOaNJnFSRZoyjia9eB8l1sdYbsgZ3ge62\",\"updated_at\":\"2015-08-28T10:22:27.204+00:00\"},\"_qTBwA9ulml3r6O0BpVWKw\":{\"token\":\"$2a$10$Q3edaR4fBboHXig/GkIk7OQq8fNDFOd1OitKRnfiP6s7nIsrXS1Iu\",\"expiry\":1503923790,\"last_token\":\"$2a$10$OAjnxjbHRxIIuNkyIqv8uePo6r4oNlzIK50czuoPHv7kBQkFQJ9q.\",\"updated_at\":\"2015-08-28T12:36:31.215+00:00\"},\"jgHSA7AMwEkbujMuIS9VQA\":{\"token\":\"$2a$10$ZESZy59f33ZVbPs2BTFal.SIDprZ1viwcaP8.fONYQaugNvWsOQrW\",\"expiry\":1503929664,\"last_token\":\"$2a$10$WuPgtUQjZ2ntLmM8eE7nU./3eMXZnglfUNXzIn.zYKmmEn0shKZGS\",\"updated_at\":\"2015-08-28T14:14:25.362+00:00\"},\"X1NP8vYxriwIW1TlzV8fMA\":{\"token\":\"$2a$10$/oBu9NzQr3O7ULOplFd22.1kP7dIrWSHj.GxOeMfXl4tubxHub20u\",\"expiry\":1503931716,\"last_token\":\"$2a$10$72zAbjer5kixJFtXMzHSVeSTMxn8WkDyw7.iPAcMNxFOaeon3afH2\",\"updated_at\":\"2015-08-28T14:48:37.330+00:00\"},\"YwrYOw6htZZf8iWpu60QJg\":{\"token\":\"$2a$10$KEnB6Hvsh4TsElZGvVE0zOZg3Tc9E2/XQxgVMY01DksB0sMk04VwW\",\"expiry\":1503934121}}', `updated_at` = '2015-08-28 15:28:41' WHERE `users`.`id` = 4[0m
2015-08-28 17:28:42.479611602 +0200 CEST [web-1]   [1m[35m (2.7ms)[0m  COMMIT
2015-08-28 17:28:42.479641522 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:28:42.479661567 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2015-08-28 14:48:36', `current_sign_in_at` = '2015-08-28 15:28:41', `sign_in_count` = 16, `updated_at` = '2015-08-28 15:28:41' WHERE `users`.`id` = 4
2015-08-28 17:28:42.47967475 +0200 CEST [web-1]   [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:28:42.479689176 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:28:42.479700789 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:28:42.479755168 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `users` SET `tokens` = '{\"gYJQ8c6uyDVIZKAT8vkPUA\":{\"token\":\"$2a$10$Af1JXaI0q4stgURcNaciK.v/6IcbwKL9pFszWI3tyhwYeaiKzm6ZC\",\"expiry\":1503595168,\"last_token\":\"$2a$10$7tyT6zdIF1MDLmtn8QrgjOmcPtNCcmzkbN9UxJmShKwpajPrRtcDa\",\"updated_at\":\"2015-08-24T17:19:28.936+00:00\"},\"Qx06WXT3WCr6gVnP7Y-ZlA\":{\"token\":\"$2a$10$0GTxVDJNvI6EysFK4Gv4deH6CqxvlgyEFZxNBtV6wEtjuTg1T5OQ6\",\"expiry\":1503840324,\"last_token\":\"$2a$10$ccXsSnAQKB0ITmb5uOfnJe828E1QwDyoT80XfL48E.i3cgaiEqn8y\",\"updated_at\":\"2015-08-27T13:25:24.870+00:00\"},\"2f1egQaRcmQz4YqmdVFQNQ\":{\"token\":\"$2a$10$tacuHIH.cKxUOt3CNiL4b.3SW/wVnAw1vRZ//D3/evwglwXql3wKC\",\"expiry\":1503868921,\"last_token\":\"$2a$10$iZof4/lEoUywk4aQQW/n0.HRP3.XH0BBmpS7sHWQ9Q/3DcLp6Qvg6\",\"updated_at\":\"2015-08-27T21:22:01.811+00:00\"},\"lo7WTWsUscpDtE2bB6VcgQ\":{\"token\":\"$2a$10$ievlhwoyXoLOOqWX0Mgwoe3KZargrw1zxWKiHemQ2m5.iXDwIfEnK\",\"expiry\":1503869903,\"last_token\":\"$2a$10$MALc0NGWhuPo4hnNUnzeiu0gzGhDT99XE1HeW1uWcu9vM/ag/fjsu\",\"updated_at\":\"2015-08-27T21:38:24.281+00:00\"},\"2i0u0DlrmKBjlnUJ94cNmQ\":{\"token\":\"$2a$10$Xm7F7x8YDz43dfgsznxSb.eHobk.4JpxXcKJmxz5uimm3LrfWJYUa\",\"expiry\":1503911459,\"last_token\":\"$2a$10$mBXBte6TUhWqE26PdwpUsOa.7bcvXYgYuqPTG1MCb96SsibrW4b/a\",\"updated_at\":\"2015-08-28T09:10:59.656+00:00\"},\"lDKbXY3WL_KccP0DskdI5w\":{\"token\":\"$2a$10$IphHCotxyFO7OyxIWj5Y.eZcdZuCIE0XmyJ4Yj4UUjgMqLqSNGo5C\",\"expiry\":1503912549,\"last_token\":\"$2a$10$IBjGV1VSKJDuiVWU/E4XdOOMQLOnkFqPCHP/AB/MZRNY/2ULMlBPO\",\"updated_at\":\"2015-08-28T09:29:09.288+00:00\"},\"a4kdy5veciGtB4HllPSTWw\":{\"token\":\"$2a$10$YJHEbCLJUduxEC7yIyGE1etZhACQEgraX9oJ.jP9U9LLmxkZtUngO\",\"expiry\":1503912670,\"last_token\":\"$2a$10$NaIynSGzTJeDw.enLU5j9OlM6SV/Z3b5xjZZzd6BzbdLWpt6h7rye\",\"updated_at\":\"2015-08-28T09:31:10.819+00:00\"},\"_7VMaoJ-dQHKRMIVsZHClw\":{\"token\":\"$2a$10$QJpPbvtSWsaYk1dCNpcwVOFBrhKWRb8gdAPiDkrVvIzlAZCoEyIUq\",\"expiry\":1503915588,\"last_token\":\"$2a$10$RZWqjZu.7lJnT22zcoDkPeD6riqNUoC.VHC9Qt6.7Qwwl9VhmGLuq\",\"updated_at\":\"2015-08-28T10:19:48.649+00:00\"},\"hDJbltbcP6swIIMHvvuYEw\":{\"token\":\"$2a$10$7C6lfs.z/.25wFZg80ftH.tEjUUFhlRaB8lITT9gCaSxj1koaciGm\",\"expiry\":1503915673,\"last_token\":\"$2a$10$pkq0mqQpn0dYJoLMhKYKperVTmy1IUVhAt67TzHoZ2UQ97Y9LpwES\",\"updated_at\":\"2015-08-28T10:21:13.269+00:00\"},\"JDCkYfAZ9OLVnBG4Wdum6w\":{\"token\":\"$2a$10$EL184j8DzbST9DmNWFNzBO2BAO6HfLCIkngWkEeTteYBEFtqY/20O\",\"expiry\":1503915746,\"last_token\":\"$2a$10$cTqaQhEZvbrW5nBdWidBSOaNJnFSRZoyjia9eB8l1sdYbsgZ3ge62\",\"updated_at\":\"2015-08-28T10:22:27.204+00:00\"},\"_qTBwA9ulml3r6O0BpVWKw\":{\"token\":\"$2a$10$Q3edaR4fBboHXig/GkIk7OQq8fNDFOd1OitKRnfiP6s7nIsrXS1Iu\",\"expiry\":1503923790,\"last_token\":\"$2a$10$OAjnxjbHRxIIuNkyIqv8uePo6r4oNlzIK50czuoPHv7kBQkFQJ9q.\",\"updated_at\":\"2015-08-28T12:36:31.215+00:00\"},\"jgHSA7AMwEkbujMuIS9VQA\":{\"token\":\"$2a$10$ZESZy59f33ZVbPs2BTFal.SIDprZ1viwcaP8.fONYQaugNvWsOQrW\",\"expiry\":1503929664,\"last_token\":\"$2a$10$WuPgtUQjZ2ntLmM8eE7nU./3eMXZnglfUNXzIn.zYKmmEn0shKZGS\",\"updated_at\":\"2015-08-28T14:14:25.362+00:00\"},\"X1NP8vYxriwIW1TlzV8fMA\":{\"token\":\"$2a$10$/oBu9NzQr3O7ULOplFd22.1kP7dIrWSHj.GxOeMfXl4tubxHub20u\",\"expiry\":1503931716,\"last_token\":\"$2a$10$72zAbjer5kixJFtXMzHSVeSTMxn8WkDyw7.iPAcMNxFOaeon3afH2\",\"updated_at\":\"2015-08-28T14:48:37.330+00:00\"},\"YwrYOw6htZZf8iWpu60QJg\":{\"token\":\"$2a$10$2X7jx54bm38Nk1xpqrP4oOt0zrVkcN8e5nKiN4jI6u5Tzu04BaYMm\",\"expiry\":1503934121,\"last_token\":\"$2a$10$KEnB6Hvsh4TsElZGvVE0zOZg3Tc9E2/XQxgVMY01DksB0sMk04VwW\",\"updated_at\":\"2015-08-28T15:28:41.867+00:00\"}}', `updated_at` = '2015-08-28 15:28:41' WHERE `users`.`id` = 4
2015-08-28 17:28:42.479790959 +0200 CEST [web-1]   [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:28:42.479812955 +0200 CEST [web-1] Completed 200 OK in 306ms (Views: 0.3ms | ActiveRecord: 12.3ms)
2015-08-28 17:28:42.4798257 +0200 CEST [web-1] Started GET "/user" for 78.230.115.176 at 2015-08-28 15:28:42 +0000
2015-08-28 17:28:42.479875607 +0200 CEST [web-1] Processing by UsersController#show as JSON
2015-08-28 17:28:42.479893857 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:42.479911448 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:42.479925825 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:42.47994046 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1
2015-08-28 17:28:42.47995185 +0200 CEST [web-1] true
2015-08-28 17:28:42.479966334 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:42.48001481 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:42.480041061 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:28:42.480054394 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'celine.bellier@ac-strasbourg.fr' LIMIT 1[0m
2015-08-28 17:28:42.480068914 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:28:42.480083261 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:28:42.480134485 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `users` SET `tokens` = '{\"gYJQ8c6uyDVIZKAT8vkPUA\":{\"token\":\"$2a$10$Af1JXaI0q4stgURcNaciK.v/6IcbwKL9pFszWI3tyhwYeaiKzm6ZC\",\"expiry\":1503595168,\"last_token\":\"$2a$10$7tyT6zdIF1MDLmtn8QrgjOmcPtNCcmzkbN9UxJmShKwpajPrRtcDa\",\"updated_at\":\"2015-08-24T17:19:28.936+00:00\"},\"Qx06WXT3WCr6gVnP7Y-ZlA\":{\"token\":\"$2a$10$0GTxVDJNvI6EysFK4Gv4deH6CqxvlgyEFZxNBtV6wEtjuTg1T5OQ6\",\"expiry\":1503840324,\"last_token\":\"$2a$10$ccXsSnAQKB0ITmb5uOfnJe828E1QwDyoT80XfL48E.i3cgaiEqn8y\",\"updated_at\":\"2015-08-27T13:25:24.870+00:00\"},\"2f1egQaRcmQz4YqmdVFQNQ\":{\"token\":\"$2a$10$tacuHIH.cKxUOt3CNiL4b.3SW/wVnAw1vRZ//D3/evwglwXql3wKC\",\"expiry\":1503868921,\"last_token\":\"$2a$10$iZof4/lEoUywk4aQQW/n0.HRP3.XH0BBmpS7sHWQ9Q/3DcLp6Qvg6\",\"updated_at\":\"2015-08-27T21:22:01.811+00:00\"},\"lo7WTWsUscpDtE2bB6VcgQ\":{\"token\":\"$2a$10$ievlhwoyXoLOOqWX0Mgwoe3KZargrw1zxWKiHemQ2m5.iXDwIfEnK\",\"expiry\":1503869903,\"last_token\":\"$2a$10$MALc0NGWhuPo4hnNUnzeiu0gzGhDT99XE1HeW1uWcu9vM/ag/fjsu\",\"updated_at\":\"2015-08-27T21:38:24.281+00:00\"},\"2i0u0DlrmKBjlnUJ94cNmQ\":{\"token\":\"$2a$10$Xm7F7x8YDz43dfgsznxSb.eHobk.4JpxXcKJmxz5uimm3LrfWJYUa\",\"expiry\":1503911459,\"last_token\":\"$2a$10$mBXBte6TUhWqE26PdwpUsOa.7bcvXYgYuqPTG1MCb96SsibrW4b/a\",\"updated_at\":\"2015-08-28T09:10:59.656+00:00\"},\"lDKbXY3WL_KccP0DskdI5w\":{\"token\":\"$2a$10$IphHCotxyFO7OyxIWj5Y.eZcdZuCIE0XmyJ4Yj4UUjgMqLqSNGo5C\",\"expiry\":1503912549,\"last_token\":\"$2a$10$IBjGV1VSKJDuiVWU/E4XdOOMQLOnkFqPCHP/AB/MZRNY/2ULMlBPO\",\"updated_at\":\"2015-08-28T09:29:09.288+00:00\"},\"a4kdy5veciGtB4HllPSTWw\":{\"token\":\"$2a$10$YJHEbCLJUduxEC7yIyGE1etZhACQEgraX9oJ.jP9U9LLmxkZtUngO\",\"expiry\":1503912670,\"last_token\":\"$2a$10$NaIynSGzTJeDw.enLU5j9OlM6SV/Z3b5xjZZzd6BzbdLWpt6h7rye\",\"updated_at\":\"2015-08-28T09:31:10.819+00:00\"},\"_7VMaoJ-dQHKRMIVsZHClw\":{\"token\":\"$2a$10$QJpPbvtSWsaYk1dCNpcwVOFBrhKWRb8gdAPiDkrVvIzlAZCoEyIUq\",\"expiry\":1503915588,\"last_token\":\"$2a$10$RZWqjZu.7lJnT22zcoDkPeD6riqNUoC.VHC9Qt6.7Qwwl9VhmGLuq\",\"updated_at\":\"2015-08-28T10:19:48.649+00:00\"},\"hDJbltbcP6swIIMHvvuYEw\":{\"token\":\"$2a$10$7C6lfs.z/.25wFZg80ftH.tEjUUFhlRaB8lITT9gCaSxj1koaciGm\",\"expiry\":1503915673,\"last_token\":\"$2a$10$pkq0mqQpn0dYJoLMhKYKperVTmy1IUVhAt67TzHoZ2UQ97Y9LpwES\",\"updated_at\":\"2015-08-28T10:21:13.269+00:00\"},\"JDCkYfAZ9OLVnBG4Wdum6w\":{\"token\":\"$2a$10$EL184j8DzbST9DmNWFNzBO2BAO6HfLCIkngWkEeTteYBEFtqY/20O\",\"expiry\":1503915746,\"last_token\":\"$2a$10$cTqaQhEZvbrW5nBdWidBSOaNJnFSRZoyjia9eB8l1sdYbsgZ3ge62\",\"updated_at\":\"2015-08-28T10:22:27.204+00:00\"},\"_qTBwA9ulml3r6O0BpVWKw\":{\"token\":\"$2a$10$Q3edaR4fBboHXig/GkIk7OQq8fNDFOd1OitKRnfiP6s7nIsrXS1Iu\",\"expiry\":1503923790,\"last_token\":\"$2a$10$OAjnxjbHRxIIuNkyIqv8uePo6r4oNlzIK50czuoPHv7kBQkFQJ9q.\",\"updated_at\":\"2015-08-28T12:36:31.215+00:00\"},\"jgHSA7AMwEkbujMuIS9VQA\":{\"token\":\"$2a$10$ZESZy59f33ZVbPs2BTFal.SIDprZ1viwcaP8.fONYQaugNvWsOQrW\",\"expiry\":1503929664,\"last_token\":\"$2a$10$WuPgtUQjZ2ntLmM8eE7nU./3eMXZnglfUNXzIn.zYKmmEn0shKZGS\",\"updated_at\":\"2015-08-28T14:14:25.362+00:00\"},\"X1NP8vYxriwIW1TlzV8fMA\":{\"token\":\"$2a$10$/oBu9NzQr3O7ULOplFd22.1kP7dIrWSHj.GxOeMfXl4tubxHub20u\",\"expiry\":1503931716,\"last_token\":\"$2a$10$72zAbjer5kixJFtXMzHSVeSTMxn8WkDyw7.iPAcMNxFOaeon3afH2\",\"updated_at\":\"2015-08-28T14:48:37.330+00:00\"},\"YwrYOw6htZZf8iWpu60QJg\":{\"token\":\"$2a$10$2X7jx54bm38Nk1xpqrP4oOt0zrVkcN8e5nKiN4jI6u5Tzu04BaYMm\",\"expiry\":1503934121,\"last_token\":\"$2a$10$KEnB6Hvsh4TsElZGvVE0zOZg3Tc9E2/XQxgVMY01DksB0sMk04VwW\",\"updated_at\":\"2015-08-28T15:28:42.126+00:00\"}}', `updated_at` = '2015-08-28 15:28:42' WHERE `users`.`id` = 4
2015-08-28 17:28:42.480152753 +0200 CEST [web-1]   [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:28:42.480168106 +0200 CEST [web-1] Completed 200 OK in 108ms (Views: 0.8ms | ActiveRecord: 6.0ms)
2015-08-28 17:28:42.480180024 +0200 CEST [web-1] Started GET "/users" for 78.230.115.176 at 2015-08-28 15:28:42 +0000
2015-08-28 17:28:42.480196426 +0200 CEST [web-1] Processing by UsersController#index as JSON
2015-08-28 17:28:42.480232703 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:42.480252462 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:42.480281477 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:42.48029654 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m
2015-08-28 17:28:42.480308139 +0200 CEST [web-1] true
2015-08-28 17:28:42.480322413 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:42.480345509 +0200 CEST [web-1]   [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:42.480429366 +0200 CEST [web-1]   [1m[36mOrganization Load (0.5ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:28:42.480488171 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'celine.bellier@ac-strasbourg.fr' LIMIT 1
2015-08-28 17:28:42.480507464 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` INNER JOIN `organizationsuserslinks` ON `users`.`id` = `organizationsuserslinks`.`user_id` WHERE `organizationsuserslinks`.`organization_id` = 2[0m
2015-08-28 17:28:42.48053578 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:28:42.480555507 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:28:42.480568357 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `users` SET `tokens` = '{\"gYJQ8c6uyDVIZKAT8vkPUA\":{\"token\":\"$2a$10$Af1JXaI0q4stgURcNaciK.v/6IcbwKL9pFszWI3tyhwYeaiKzm6ZC\",\"expiry\":1503595168,\"last_token\":\"$2a$10$7tyT6zdIF1MDLmtn8QrgjOmcPtNCcmzkbN9UxJmShKwpajPrRtcDa\",\"updated_at\":\"2015-08-24T17:19:28.936+00:00\"},\"Qx06WXT3WCr6gVnP7Y-ZlA\":{\"token\":\"$2a$10$0GTxVDJNvI6EysFK4Gv4deH6CqxvlgyEFZxNBtV6wEtjuTg1T5OQ6\",\"expiry\":1503840324,\"last_token\":\"$2a$10$ccXsSnAQKB0ITmb5uOfnJe828E1QwDyoT80XfL48E.i3cgaiEqn8y\",\"updated_at\":\"2015-08-27T13:25:24.870+00:00\"},\"2f1egQaRcmQz4YqmdVFQNQ\":{\"token\":\"$2a$10$tacuHIH.cKxUOt3CNiL4b.3SW/wVnAw1vRZ//D3/evwglwXql3wKC\",\"expiry\":1503868921,\"last_token\":\"$2a$10$iZof4/lEoUywk4aQQW/n0.HRP3.XH0BBmpS7sHWQ9Q/3DcLp6Qvg6\",\"updated_at\":\"2015-08-27T21:22:01.811+00:00\"},\"lo7WTWsUscpDtE2bB6VcgQ\":{\"token\":\"$2a$10$ievlhwoyXoLOOqWX0Mgwoe3KZargrw1zxWKiHemQ2m5.iXDwIfEnK\",\"expiry\":1503869903,\"last_token\":\"$2a$10$MALc0NGWhuPo4hnNUnzeiu0gzGhDT99XE1HeW1uWcu9vM/ag/fjsu\",\"updated_at\":\"2015-08-27T21:38:24.281+00:00\"},\"2i0u0DlrmKBjlnUJ94cNmQ\":{\"token\":\"$2a$10$Xm7F7x8YDz43dfgsznxSb.eHobk.4JpxXcKJmxz5uimm3LrfWJYUa\",\"expiry\":1503911459,\"last_token\":\"$2a$10$mBXBte6TUhWqE26PdwpUsOa.7bcvXYgYuqPTG1MCb96SsibrW4b/a\",\"updated_at\":\"2015-08-28T09:10:59.656+00:00\"},\"lDKbXY3WL_KccP0DskdI5w\":{\"token\":\"$2a$10$IphHCotxyFO7OyxIWj5Y.eZcdZuCIE0XmyJ4Yj4UUjgMqLqSNGo5C\",\"expiry\":1503912549,\"last_token\":\"$2a$10$IBjGV1VSKJDuiVWU/E4XdOOMQLOnkFqPCHP/AB/MZRNY/2ULMlBPO\",\"updated_at\":\"2015-08-28T09:29:09.288+00:00\"},\"a4kdy5veciGtB4HllPSTWw\":{\"token\":\"$2a$10$YJHEbCLJUduxEC7yIyGE1etZhACQEgraX9oJ.jP9U9LLmxkZtUngO\",\"expiry\":1503912670,\"last_token\":\"$2a$10$NaIynSGzTJeDw.enLU5j9OlM6SV/Z3b5xjZZzd6BzbdLWpt6h7rye\",\"updated_at\":\"2015-08-28T09:31:10.819+00:00\"},\"_7VMaoJ-dQHKRMIVsZHClw\":{\"token\":\"$2a$10$QJpPbvtSWsaYk1dCNpcwVOFBrhKWRb8gdAPiDkrVvIzlAZCoEyIUq\",\"expiry\":1503915588,\"last_token\":\"$2a$10$RZWqjZu.7lJnT22zcoDkPeD6riqNUoC.VHC9Qt6.7Qwwl9VhmGLuq\",\"updated_at\":\"2015-08-28T10:19:48.649+00:00\"},\"hDJbltbcP6swIIMHvvuYEw\":{\"token\":\"$2a$10$7C6lfs.z/.25wFZg80ftH.tEjUUFhlRaB8lITT9gCaSxj1koaciGm\",\"expiry\":1503915673,\"last_token\":\"$2a$10$pkq0mqQpn0dYJoLMhKYKperVTmy1IUVhAt67TzHoZ2UQ97Y9LpwES\",\"updated_at\":\"2015-08-28T10:21:13.269+00:00\"},\"JDCkYfAZ9OLVnBG4Wdum6w\":{\"token\":\"$2a$10$EL184j8DzbST9DmNWFNzBO2BAO6HfLCIkngWkEeTteYBEFtqY/20O\",\"expiry\":1503915746,\"last_token\":\"$2a$10$cTqaQhEZvbrW5nBdWidBSOaNJnFSRZoyjia9eB8l1sdYbsgZ3ge62\",\"updated_at\":\"2015-08-28T10:22:27.204+00:00\"},\"_qTBwA9ulml3r6O0BpVWKw\":{\"token\":\"$2a$10$Q3edaR4fBboHXig/GkIk7OQq8fNDFOd1OitKRnfiP6s7nIsrXS1Iu\",\"expiry\":1503923790,\"last_token\":\"$2a$10$OAjnxjbHRxIIuNkyIqv8uePo6r4oNlzIK50czuoPHv7kBQkFQJ9q.\",\"updated_at\":\"2015-08-28T12:36:31.215+00:00\"},\"jgHSA7AMwEkbujMuIS9VQA\":{\"token\":\"$2a$10$ZESZy59f33ZVbPs2BTFal.SIDprZ1viwcaP8.fONYQaugNvWsOQrW\",\"expiry\":1503929664,\"last_token\":\"$2a$10$WuPgtUQjZ2ntLmM8eE7nU./3eMXZnglfUNXzIn.zYKmmEn0shKZGS\",\"updated_at\":\"2015-08-28T14:14:25.362+00:00\"},\"X1NP8vYxriwIW1TlzV8fMA\":{\"token\":\"$2a$10$/oBu9NzQr3O7ULOplFd22.1kP7dIrWSHj.GxOeMfXl4tubxHub20u\",\"expiry\":1503931716,\"last_token\":\"$2a$10$72zAbjer5kixJFtXMzHSVeSTMxn8WkDyw7.iPAcMNxFOaeon3afH2\",\"updated_at\":\"2015-08-28T14:48:37.330+00:00\"},\"YwrYOw6htZZf8iWpu60QJg\":{\"token\":\"$2a$10$2X7jx54bm38Nk1xpqrP4oOt0zrVkcN8e5nKiN4jI6u5Tzu04BaYMm\",\"expiry\":1503934121,\"last_token\":\"$2a$10$KEnB6Hvsh4TsElZGvVE0zOZg3Tc9E2/XQxgVMY01DksB0sMk04VwW\",\"updated_at\":\"2015-08-28T15:28:42.350+00:00\"}}', `updated_at` = '2015-08-28 15:28:42' WHERE `users`.`id` = 4
2015-08-28 17:28:42.480616747 +0200 CEST [web-1]   [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
2015-08-28 17:28:42.480636656 +0200 CEST [web-1] Completed 200 OK in 112ms (Views: 0.1ms | ActiveRecord: 5.9ms)
2015-08-28 17:28:44.480938386 +0200 CEST [web-1] Started GET "/chapters?node_id=128" for 78.230.115.176 at 2015-08-28 15:28:43 +0000
2015-08-28 17:28:44.481113493 +0200 CEST [web-1] Processing by ChaptersController#index as JSON
2015-08-28 17:28:44.481221338 +0200 CEST [web-1]   Parameters: {"node_id"=>"128"}
2015-08-28 17:28:44.481305519 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:44.481396752 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:44.481471303 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:44.481560227 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.5ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1
2015-08-28 17:28:44.4815818 +0200 CEST [web-1] true
2015-08-28 17:28:44.481623311 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:44.481670415 +0200 CEST [web-1]   [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:44.481689875 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:28:44.481713481 +0200 CEST [web-1]   [1m[36mNode Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 2 AND `nodes`.`id` = 128 LIMIT 1[0m
2015-08-28 17:28:44.481784278 +0200 CEST [web-1]   [1m[35mNode Load (0.7ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 2 AND `nodes`.`id` = 128 LIMIT 1
2015-08-28 17:28:44.481801505 +0200 CEST [web-1]   [1m[36mChapter Load (0.6ms)[0m  [1mSELECT `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 128[0m
2015-08-28 17:28:44.481820223 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.7ms)[0m  SELECT `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`chapter_id` = 215
2015-08-28 17:28:44.481832702 +0200 CEST [web-1] Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 3.6ms)
2015-08-28 17:28:46.482096533 +0200 CEST [web-1] Started GET "/chapters?node_id=171" for 78.230.115.176 at 2015-08-28 15:28:45 +0000
2015-08-28 17:28:46.482184421 +0200 CEST [web-1] Processing by ChaptersController#index as JSON
2015-08-28 17:28:46.482248733 +0200 CEST [web-1]   Parameters: {"node_id"=>"171"}
2015-08-28 17:28:46.482265254 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:28:46.482280776 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:46.482292746 +0200 CEST [web-1] lycee-couffignal
2015-08-28 17:28:46.482312388 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1[0m
2015-08-28 17:28:46.482324655 +0200 CEST [web-1] true
2015-08-28 17:28:46.482339367 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:28:46.482369672 +0200 CEST [web-1]   [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal' LIMIT 1  [["subdomain", "lycee-couffignal"]]
2015-08-28 17:28:46.482413176 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-couffignal'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:28:46.482426689 +0200 CEST [web-1]   [1m[35mNode Exists (0.6ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 2 AND `nodes`.`id` = 171 LIMIT 1
2015-08-28 17:28:46.482441375 +0200 CEST [web-1]   [1m[36mNode Load (0.5ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 2 AND `nodes`.`id` = 171 LIMIT 1[0m
2015-08-28 17:28:46.482452983 +0200 CEST [web-1]   [1m[35mChapter Load (0.6ms)[0m  SELECT `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 171
2015-08-28 17:28:46.482467464 +0200 CEST [web-1]   [1m[36mAwsdocument Load (0.6ms)[0m  [1mSELECT `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`chapter_id` = 211[0m
2015-08-28 17:28:46.482493281 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.5ms)[0m  SELECT `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`chapter_id` = 212
2015-08-28 17:28:46.482538864 +0200 CEST [web-1] Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 3.4ms)
2015-08-28 17:29:06.775495825 +0200 CEST [web-1] [1] Puma starting in cluster mode...
2015-08-28 17:29:06.775613974 +0200 CEST [web-1] [1] * Version 2.11.1 (ruby 2.1.2-p95), codename: Intrepid Squirrel
2015-08-28 17:29:06.775694478 +0200 CEST [web-1] [1] * Min threads: 5, max threads: 5
2015-08-28 17:29:06.77574674 +0200 CEST [web-1] [1] * Environment: production
2015-08-28 17:29:06.775841828 +0200 CEST [web-1] [1] * Process workers: 3
2015-08-28 17:29:06.77587941 +0200 CEST [web-1] [1] * Preloading application
2015-08-28 17:29:07.554899426 +0200 CEST [clock-1] I, [2015-08-28T15:29:06.588616 #1]  INFO -- : Starting clock for 2 events: [ activity reports awsdocuments links ]
2015-08-28 17:29:07.555014484 +0200 CEST [clock-1] I, [2015-08-28T15:29:06.588724 #1]  INFO -- : Triggering 'activity reports'
2015-08-28 17:29:10.776400312 +0200 CEST [web-1] [1] * Listening on tcp://0.0.0.0:20005
2015-08-28 17:29:10.776540813 +0200 CEST [web-1] [1] Use Ctrl-C to stop
2015-08-28 17:29:10.77666001 +0200 CEST [web-1] [1] - Worker 0 (pid: 13) booted, phase: 0
2015-08-28 17:29:10.776716532 +0200 CEST [web-1] [1] - Worker 1 (pid: 17) booted, phase: 0
2015-08-28 17:29:10.776821411 +0200 CEST [web-1] [1] - Worker 2 (pid: 25) booted, phase: 0
2015-08-28 17:29:12.555543946 +0200 CEST [clock-1] I, [2015-08-28T15:29:11.877059 #1]  INFO -- : Triggering 'awsdocuments links'
2015-08-28 17:29:14.486188581 +0200 CEST [web-1] [1] - Gracefully shutting down workers...
2015-08-28 17:29:20.777964851 +0200 CEST [web-1] Started GET "/" for 88.169.99.128 at 2015-08-28 15:29:20 +0000
2015-08-28 17:29:20.778083376 +0200 CEST [web-1] Processing by AngularController#index as HTML
2015-08-28 17:29:20.77814833 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:20.77822313 +0200 CEST [web-1]   Rendered angular/index.html.erb within layouts/normalApp (0.9ms)
2015-08-28 17:29:20.778273209 +0200 CEST [web-1] Completed 200 OK in 27ms (Views: 25.5ms | ActiveRecord: 0.0ms)
2015-08-28 17:29:21.487117242 +0200 CEST [web-1] [1] === puma shutdown: 2015-08-28 15:29:20 +0000 ===
2015-08-28 17:29:21.487205338 +0200 CEST [web-1] [1] - Goodbye!
2015-08-28 17:29:21.778401893 +0200 CEST [web-1] Started GET "/auth/validate_token" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.778502069 +0200 CEST [web-1] Processing by DeviseTokenAuth::TokenValidationsController#validate_token as JSON
2015-08-28 17:29:21.778547145 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.778563235 +0200 CEST [web-1] Started GET "/organization" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.778597892 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:21.778609847 +0200 CEST [web-1] Started GET "/nodes" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.778624335 +0200 CEST [web-1] Processing by OrganizationsController#show as JSON
2015-08-28 17:29:21.778635414 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.778660618 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:21.778688541 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:21.778730987 +0200 CEST [web-1] Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 3.1ms)
2015-08-28 17:29:21.778747078 +0200 CEST [web-1] Processing by NodesController#index as JSON
2015-08-28 17:29:21.77876204 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.778784696 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:21.778840633 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:21.77885675 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:29:21.778871378 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:21.778893079 +0200 CEST [web-1]   [1m[36mNode Load (0.5ms)[0m  [1mSELECT `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3[0m
2015-08-28 17:29:21.778965242 +0200 CEST [web-1] Completed 200 OK in 71ms (Views: 3.5ms | ActiveRecord: 5.8ms)
2015-08-28 17:29:21.778986611 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$sOb2QSJcOxMYMaWHW1NSOeipKUrytR1SYvmP/37X7ai8OSzzkH3r6\",\"expiry\":1503934161,\"last_token\":\"$2a$10$N6OlNLoBJJ/P.mBWLntDNeDGQ/emlzRZsA/iP.8ezhjijyYBKDnkS\",\"updated_at\":\"2015-08-28T15:29:21.312+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:21' WHERE `users`.`id` = 3
2015-08-28 17:29:21.779024831 +0200 CEST [web-1]   [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:21.779093682 +0200 CEST [web-1] Completed 200 OK in 248ms (Views: 0.5ms | ActiveRecord: 8.0ms)
2015-08-28 17:29:21.779131777 +0200 CEST [web-1] Started GET "/chapters?node_id=203" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.779201014 +0200 CEST [web-1] Processing by ChaptersController#index as JSON
2015-08-28 17:29:21.779235836 +0200 CEST [web-1]   Parameters: {"node_id"=>"203"}
2015-08-28 17:29:21.779248393 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.779264932 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:21.779288168 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:21.779321299 +0200 CEST [web-1] Started GET "/user" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.779368167 +0200 CEST [web-1] Processing by UsersController#show as JSON
2015-08-28 17:29:21.779422688 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.779483702 +0200 CEST [web-1]   [1m[36mNode Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:21.779573254 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:21.779593547 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.5ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:21.779609006 +0200 CEST [web-1]   [1m[36mOrganization Load (0.5ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:21.779620823 +0200 CEST [web-1]   [1m[36mChapter Load (0.6ms)[0m  [1mSELECT `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203[0m
2015-08-28 17:29:21.77963513 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:21.779646881 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.6ms)[0m  SELECT `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`chapter_id` = 274
2015-08-28 17:29:21.779662674 +0200 CEST [web-1] Completed 200 OK in 65ms (Views: 3.8ms | ActiveRecord: 7.3ms)
2015-08-28 17:29:21.77968631 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:21.779714315 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE
2015-08-28 17:29:21.779732502 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$sOb2QSJcOxMYMaWHW1NSOeipKUrytR1SYvmP/37X7ai8OSzzkH3r6\",\"expiry\":1503934161,\"last_token\":\"$2a$10$N6OlNLoBJJ/P.mBWLntDNeDGQ/emlzRZsA/iP.8ezhjijyYBKDnkS\",\"updated_at\":\"2015-08-28T15:29:21.593+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:21' WHERE `users`.`id` = 3[0m
2015-08-28 17:29:21.779776467 +0200 CEST [web-1]   [1m[35m (2.8ms)[0m  COMMIT
2015-08-28 17:29:21.779795565 +0200 CEST [web-1] Completed 200 OK in 134ms (Views: 0.9ms | ActiveRecord: 7.3ms)
2015-08-28 17:29:21.779810391 +0200 CEST [web-1] Started GET "/users" for 88.169.99.128 at 2015-08-28 15:29:21 +0000
2015-08-28 17:29:21.779821941 +0200 CEST [web-1] Processing by UsersController#index as JSON
2015-08-28 17:29:21.779835678 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:21.779846947 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:21.77986311 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:21.779874908 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:22.780041189 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` INNER JOIN `organizationsuserslinks` ON `users`.`id` = `organizationsuserslinks`.`user_id` WHERE `organizationsuserslinks`.`organization_id` = 3
2015-08-28 17:29:22.780138689 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:22.780181915 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE
2015-08-28 17:29:22.780197018 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$sOb2QSJcOxMYMaWHW1NSOeipKUrytR1SYvmP/37X7ai8OSzzkH3r6\",\"expiry\":1503934161,\"last_token\":\"$2a$10$N6OlNLoBJJ/P.mBWLntDNeDGQ/emlzRZsA/iP.8ezhjijyYBKDnkS\",\"updated_at\":\"2015-08-28T15:29:21.847+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:21' WHERE `users`.`id` = 3[0m
2015-08-28 17:29:22.780232041 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  COMMIT
2015-08-28 17:29:22.780250614 +0200 CEST [web-1] Completed 200 OK in 128ms (Views: 0.1ms | ActiveRecord: 6.7ms)
2015-08-28 17:29:28.780970058 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:28 +0000
2015-08-28 17:29:28.781065762 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:28.781120276 +0200 CEST [web-1]   Parameters: {"title"=>"cours.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab00e9538 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-1hjnv8s.pdf>, @original_filename="cours.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:28.781157779 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:28.781190761 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:28.781213531 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:28.781228516 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:28.781268973 +0200 CEST [web-1]   [1m[35mNode Exists (0.5ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:28.781284301 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:28.781296296 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:28.781311112 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:28.781323162 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:28.781337165 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:28.781384219 +0200 CEST [web-1] Organization
2015-08-28 17:29:28.781403308 +0200 CEST [web-1] Node
2015-08-28 17:29:28.781415176 +0200 CEST [web-1] Chapter
2015-08-28 17:29:28.781430297 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:28.781442133 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:28.781456204 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:28.781492307 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:28.781512768 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours.pdf', 'cours.pdf', 3, 3, 274, '2015-08-28 15:29:28', '2015-08-28 15:29:28')
2015-08-28 17:29:28.781524924 +0200 CEST [web-1]   [1m[36mSQL (0.9ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152928Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=40720d92cc510e2bc9be43ceb011cb1c63dbd2d864d503d1cb5f71b812ea93aa' WHERE `awsdocuments`.`id` = 85[0m
2015-08-28 17:29:28.781539168 +0200 CEST [web-1]   [1m[35m (2.6ms)[0m  COMMIT
2015-08-28 17:29:28.781550634 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:28.78156705 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE
2015-08-28 17:29:28.781601381 +0200 CEST [web-1]   [1m[36mSQL (0.9ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"expiry\":1503934168,\"last_token\":\"$2a$10$sOb2QSJcOxMYMaWHW1NSOeipKUrytR1SYvmP/37X7ai8OSzzkH3r6\",\"updated_at\":\"2015-08-28T15:29:28.535+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:28' WHERE `users`.`id` = 3[0m
2015-08-28 17:29:28.781643954 +0200 CEST [web-1]   [1m[35m (3.1ms)[0m  COMMIT
2015-08-28 17:29:28.781657749 +0200 CEST [web-1] Completed 201 Created in 535ms (Views: 2.6ms | ActiveRecord: 19.4ms)
2015-08-28 17:29:43.783430482 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:43 +0000
2015-08-28 17:29:43.783545224 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:43.783617589 +0200 CEST [web-1]   Parameters: {"title"=>"cours.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc2f3890 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-10exmsj.pdf>, @original_filename="cours.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:43.783662906 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:43.783705826 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:43.783724996 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:43.783739943 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:43.783751742 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:43.783766395 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:43.783788902 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:43.783846434 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:43.783892947 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:43.783916515 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:43.783951124 +0200 CEST [web-1] Organization
2015-08-28 17:29:43.783965842 +0200 CEST [web-1] Node
2015-08-28 17:29:43.783981949 +0200 CEST [web-1] Chapter
2015-08-28 17:29:43.783996567 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:43.784008172 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:43.784021813 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:43.784035383 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:29:43.784050709 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours.pdf', 'cours.pdf', 3, 3, 274, '2015-08-28 15:29:43', '2015-08-28 15:29:43')[0m
2015-08-28 17:29:43.78407939 +0200 CEST [web-1]   [1m[35mSQL (0.8ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152943Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=77264b367f818415db7c52fe260819dcae74205532f895c11c0c2bb6c26db74f' WHERE `awsdocuments`.`id` = 86
2015-08-28 17:29:43.784120631 +0200 CEST [web-1]   [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:43.784141336 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:29:43.784167196 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:43.784204456 +0200 CEST [web-1]   [1m[35mSQL (1.0ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:43.470+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:43' WHERE `users`.`id` = 3
2015-08-28 17:29:43.784220738 +0200 CEST [web-1]   [1m[36m (2.9ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:43.784233302 +0200 CEST [web-1] Completed 201 Created in 454ms (Views: 2.5ms | ActiveRecord: 18.4ms)
2015-08-28 17:29:43.784248041 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:43 +0000
2015-08-28 17:29:43.784259898 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:43.784274473 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 5.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac4271b80 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-4us5vv.pdf>, @original_filename="cours copy 5.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 5.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:43.784286446 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:43.784300741 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:43.784321407 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:43.784345288 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:43.784358778 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:43.784385016 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:43.784413138 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:43.784460377 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:43.784500379 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:43.784516749 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:43.784528848 +0200 CEST [web-1] Organization
2015-08-28 17:29:43.784568234 +0200 CEST [web-1] Node
2015-08-28 17:29:43.784588292 +0200 CEST [web-1] Chapter
2015-08-28 17:29:43.784603145 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:44.78473984 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:44.784854966 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:44.784904108 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:29:44.784948622 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 5.pdf', 'cours_copy_5.pdf', 3, 3, 274, '2015-08-28 15:29:43', '2015-08-28 15:29:43')[0m
2015-08-28 17:29:44.78499017 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:44 +0000
2015-08-28 17:29:44.785055656 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_5.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152944Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=bd59b11b44c676a434fe3523971d6c1cc8d1d01b772f2601456295a3f774758a' WHERE `awsdocuments`.`id` = 87
2015-08-28 17:29:44.785133634 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:44.785162496 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 2.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac0318600 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-1plpwa7.pdf>, @original_filename="cours copy 2.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 2.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:44.785187664 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:44.785207498 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:44.785236634 +0200 CEST [web-1]   [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:44.785287395 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:44.785316566 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:44.785339355 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:44.785363208 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:29:44.785395114 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:44.785424088 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:44.78544313 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:44.785465834 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:44.785489546 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:44.785523059 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:44.785543445 +0200 CEST [web-1] Organization
2015-08-28 17:29:44.785565495 +0200 CEST [web-1] Node
2015-08-28 17:29:44.785583355 +0200 CEST [web-1] Chapter
2015-08-28 17:29:44.785610876 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:44.785648802 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:44.215+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:44' WHERE `users`.`id` = 3
2015-08-28 17:29:44.785692608 +0200 CEST [web-1]   [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:44.785713007 +0200 CEST [web-1] Completed 201 Created in 485ms (Views: 2.6ms | ActiveRecord: 14.0ms)
2015-08-28 17:29:44.785735222 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:44.785753377 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:44.785831226 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:29:44.785853809 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 2.pdf', 'cours_copy_2.pdf', 3, 3, 274, '2015-08-28 15:29:44', '2015-08-28 15:29:44')[0m
2015-08-28 17:29:44.785876287 +0200 CEST [web-1]   [1m[35mSQL (0.9ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_2.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152944Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=3b8313cfbb36c76879769d64fcc521fa4ede7df1f53deb9f11f66a0ffe4d2d18' WHERE `awsdocuments`.`id` = 88
2015-08-28 17:29:44.785924172 +0200 CEST [web-1]   [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:44.785952551 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:29:44.785970728 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:44.785996941 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:44.647+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:44' WHERE `users`.`id` = 3
2015-08-28 17:29:44.786024342 +0200 CEST [web-1]   [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:44.786047707 +0200 CEST [web-1] Completed 201 Created in 450ms (Views: 1.9ms | ActiveRecord: 11.5ms)
2015-08-28 17:29:44.786071242 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:44 +0000
2015-08-28 17:29:44.786097293 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:44.786138742 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 3.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad96764c8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-18bvfpv.pdf>, @original_filename="cours copy 3.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 3.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:44.786173263 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:44.786224516 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:44.786248189 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:44.786288434 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:44.786310622 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:44.786339294 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:45.78650184 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:45.786595061 +0200 CEST [web-1]   [1m[36mChapter Load (0.6ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:45.786640461 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.786654385 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:45.786669425 +0200 CEST [web-1] Organization
2015-08-28 17:29:45.786681946 +0200 CEST [web-1] Node
2015-08-28 17:29:45.786704972 +0200 CEST [web-1] Chapter
2015-08-28 17:29:45.786716697 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:45.786731112 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:44 +0000
2015-08-28 17:29:45.78674263 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:45.786756873 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 4.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad76d0678 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-nfzzis.pdf>, @original_filename="cours copy 4.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 4.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:45.786839423 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:45.786877374 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:45.786917669 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:45.786933679 +0200 CEST [web-1]   [1m[36mOrganization Load (0.5ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:45.786945346 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:45.786959745 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:45.786970938 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:45.786984697 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:45.787017534 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.787051004 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:45.78706652 +0200 CEST [web-1] Organization
2015-08-28 17:29:45.787080401 +0200 CEST [web-1] Node
2015-08-28 17:29:45.787091659 +0200 CEST [web-1] Chapter
2015-08-28 17:29:45.787105588 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:45.787116664 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:44 +0000
2015-08-28 17:29:45.787130592 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:45.787164367 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad87a81a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1uj0529.pdf>, @original_filename="cours copy.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:45.78717912 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:45.787190467 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:45.787211046 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:45.787222371 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:45.787254462 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:45.787278812 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:45.787293937 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:45.787305282 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:45.787319952 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.787353146 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:45.787389591 +0200 CEST [web-1] Organization
2015-08-28 17:29:45.787428572 +0200 CEST [web-1] Node
2015-08-28 17:29:45.787447633 +0200 CEST [web-1] Chapter
2015-08-28 17:29:45.787480457 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:45.787545442 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:45.787580997 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.787598522 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.78761033 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 3.pdf', 'cours_copy_3.pdf', 3, 3, 274, '2015-08-28 15:29:44', '2015-08-28 15:29:44')
2015-08-28 17:29:45.787686184 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:45 +0000
2015-08-28 17:29:45.787719381 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:45.787743669 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 6.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad9a84998 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-3acv70.pdf>, @original_filename="cours copy 6.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 6.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:45.787775194 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:45.787806848 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:45.787819191 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:45.787833133 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:45.787844688 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:45.787858501 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.787873449 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:45.787941373 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:45.7879577 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.787984974 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:45.788061635 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 4.pdf', 'cours_copy_4.pdf', 3, 3, 274, '2015-08-28 15:29:45', '2015-08-28 15:29:45')
2015-08-28 17:29:45.788085511 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:45.788097617 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.788111662 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:45.788122997 +0200 CEST [web-1] Organization
2015-08-28 17:29:45.788167044 +0200 CEST [web-1] Node
2015-08-28 17:29:45.788219643 +0200 CEST [web-1] Chapter
2015-08-28 17:29:45.788267052 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:45.788304556 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:45.788340197 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.788363859 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.788379292 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy.pdf', 'cours_copy.pdf', 3, 3, 274, '2015-08-28 15:29:45', '2015-08-28 15:29:45')
2015-08-28 17:29:45.788392774 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:45.788421259 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:45.788449698 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_3.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152945Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=54b651a5053090c98fef86f54fe21e451acdabb54327efed8535911a1eb09d2c' WHERE `awsdocuments`.`id` = 89
2015-08-28 17:29:45.788485314 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.788499481 +0200 CEST [web-1]   [1m[35m (2.9ms)[0m  COMMIT
2015-08-28 17:29:45.788514533 +0200 CEST [web-1]   [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 6.pdf', 'cours_copy_6.pdf', 3, 3, 274, '2015-08-28 15:29:45', '2015-08-28 15:29:45')[0m
2015-08-28 17:29:45.788526384 +0200 CEST [web-1]   [1m[35m (1.7ms)[0m  BEGIN
2015-08-28 17:29:45.788540924 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:45.788552727 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_4.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152945Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=68b3cb1e633cd64a4b922f968072f2b4694b7a0f1236958fb6885e5d5e94d444' WHERE `awsdocuments`.`id` = 90[0m
2015-08-28 17:29:45.788585856 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:45.292+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:45' WHERE `users`.`id` = 3
2015-08-28 17:29:45.788619449 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  COMMIT
2015-08-28 17:29:45.788650735 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.788666258 +0200 CEST [web-1]   [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:45.788680908 +0200 CEST [web-1] Completed 201 Created in 524ms (Views: 1.8ms | ActiveRecord: 12.3ms)
2015-08-28 17:29:45.788692978 +0200 CEST [web-1]   [1m[35mUser Load (0.8ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE
2015-08-28 17:29:45.788707913 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:45.302+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:45' WHERE `users`.`id` = 3[0m
2015-08-28 17:29:45.788720951 +0200 CEST [web-1]   [1m[35m (2.5ms)[0m  COMMIT
2015-08-28 17:29:45.788735132 +0200 CEST [web-1] Completed 201 Created in 414ms (Views: 1.8ms | ActiveRecord: 10.8ms)
2015-08-28 17:29:45.78875126 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152945Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=00561c39aa3cb93e6c028da4d14d4edb316509c9a12a91c1c8ca7ffb47859dc2' WHERE `awsdocuments`.`id` = 91[0m
2015-08-28 17:29:45.788766013 +0200 CEST [web-1]   [1m[35m (2.8ms)[0m  COMMIT
2015-08-28 17:29:45.788777615 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:29:45.788792342 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE
2015-08-28 17:29:45.788803735 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:45.377+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:45' WHERE `users`.`id` = 3[0m
2015-08-28 17:29:45.788818298 +0200 CEST [web-1]   [1m[35m (2.8ms)[0m  COMMIT
2015-08-28 17:29:45.788832068 +0200 CEST [web-1] Completed 201 Created in 439ms (Views: 1.8ms | ActiveRecord: 11.6ms)
2015-08-28 17:29:45.788846426 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_6.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152945Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=d407282ac9deeba355d732cd5ad85bc78c024b91703ca54a13e24410cff432ce' WHERE `awsdocuments`.`id` = 92
2015-08-28 17:29:45.788858115 +0200 CEST [web-1]   [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:45.788881972 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:29:45.788909255 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:45.78894304 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:45.502+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:45' WHERE `users`.`id` = 3
2015-08-28 17:29:45.788964706 +0200 CEST [web-1]   [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:45.788980138 +0200 CEST [web-1] Completed 201 Created in 432ms (Views: 1.8ms | ActiveRecord: 15.8ms)
2015-08-28 17:29:46.789122946 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:46 +0000
2015-08-28 17:29:46.789219547 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:46.789266452 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 7.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adab24500 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-zwm757.pdf>, @original_filename="cours copy 7.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 7.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:46.789288357 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:46.789308437 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:46.789322525 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:46.789337527 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:46.789351193 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:46.789365558 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:46.789377471 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:46.78942604 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:46.789441721 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:46.789456249 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:46.789467615 +0200 CEST [web-1] Organization
2015-08-28 17:29:46.78948126 +0200 CEST [web-1] Node
2015-08-28 17:29:46.789492899 +0200 CEST [web-1] Chapter
2015-08-28 17:29:46.789529889 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:46.789545242 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:46.789559238 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:46.789571031 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:29:46.789589414 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 7.pdf', 'cours_copy_7.pdf', 3, 3, 274, '2015-08-28 15:29:46', '2015-08-28 15:29:46')[0m
2015-08-28 17:29:46.789601598 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_7.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152946Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=f84c5bfae70028af7bd4113780fcc7775136cefb0a3a622904f8e0e688037599' WHERE `awsdocuments`.`id` = 93
2015-08-28 17:29:46.78963273 +0200 CEST [web-1]   [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:46.789696091 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:29:46.78971951 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:46.789731445 +0200 CEST [web-1]   [1m[35mSQL (0.8ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:46.575+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:46' WHERE `users`.`id` = 3
2015-08-28 17:29:46.789782253 +0200 CEST [web-1]   [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:46.789800168 +0200 CEST [web-1] Completed 201 Created in 408ms (Views: 1.8ms | ActiveRecord: 12.4ms)
2015-08-28 17:29:46.789819148 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:46 +0000
2015-08-28 17:29:46.789830787 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:46.789850416 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 8.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad98aaf78 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-1a13r24.pdf>, @original_filename="cours copy 8.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 8.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:46.789862483 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:46.78993678 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:46.789953622 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:46.789968261 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:46.789979555 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:46.790012729 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:46.790039575 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:46.79006022 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:46.790072199 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:46.790086027 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:46.790097383 +0200 CEST [web-1] Organization
2015-08-28 17:29:46.790110982 +0200 CEST [web-1] Node
2015-08-28 17:29:46.790122574 +0200 CEST [web-1] Chapter
2015-08-28 17:29:46.790180673 +0200 CEST [web-1]   [1m[36mUser Load (0.9ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:47.790321778 +0200 CEST [web-1] hello@unisphere.eu
2015-08-28 17:29:47.790462731 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:47.790545287 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:29:47.790623418 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('cours copy 8.pdf', 'cours_copy_8.pdf', 3, 3, 274, '2015-08-28 15:29:46', '2015-08-28 15:29:46')[0m
2015-08-28 17:29:47.79069765 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/cours_copy_8.pdf?X-Amz-Expires=604800&X-Amz-Date=20150828T152947Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=0005f69cb722ad698730a96864a6e745110c96be6cd6cab2a0d36730498a0168' WHERE `awsdocuments`.`id` = 94
2015-08-28 17:29:47.790717405 +0200 CEST [web-1]   [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:47.790732939 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:29:47.790744526 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:29:47.790770161 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `users` SET `tokens` = '{\"0zheJhcsVJjAQt49ns8bxw\":{\"token\":\"$2a$10$iYothZgM/z3pmlqplKhQgeU/vsP7Lmm0MzJnCQmqrwmEvBYTeZzge\",\"expiry\":1503584071,\"last_token\":\"$2a$10$KcJa..Zcq8BDbyPBDew0LOZGWCkgKd8NdFmt8vZn8K6AAlBsfwvSO\",\"updated_at\":\"2015-08-24T14:14:33.828+00:00\"},\"5IHE2_ehAR7yDLH1Wu4JvA\":{\"token\":\"$2a$10$G.gsT1rE1geaCj2AlH97DuC0hWfifAPZ8SB4tZET1n/I74vT49mqq\",\"expiry\":1503641078,\"last_token\":\"$2a$10$q38T6eSRPJu5nNbwO2BLMe0W60WIi4tmGdHV44t9ORj8eLiReFNke\",\"updated_at\":\"2015-08-25T06:04:41.596+00:00\"},\"c9P19c42WhOC7gUUv-liYw\":{\"token\":\"$2a$10$h6vNqdzndIJMTz4Wufqt2u3xueoN1u2LC55bB.nn3Lluo57v9t3eW\",\"expiry\":1503592074,\"last_token\":\"$2a$10$XPYa/Hd5iCMIvKlaVRJqgehIi6nLaJHojOJ1AsfYgmaqMzhUUzxc6\",\"updated_at\":\"2015-08-24T16:27:54.203+00:00\"},\"9P67RECs4kVBMr-eddvxeQ\":{\"token\":\"$2a$10$TCX5QLopqo/3b5jzwKPuOu/PSefLYBvgcvDTSXyfSt5ygtuwoe652\",\"expiry\":1503823789,\"last_token\":\"$2a$10$6DeX7pzJmmoQ5oE/Gtcxk.qvqkRW5E7QBLdzmVk3rdIJzdviY43ZG\",\"updated_at\":\"2015-08-27T08:49:50.500+00:00\"},\"lWSaeSghX8K1LSIa-MsEpQ\":{\"token\":\"$2a$10$frTvg7zPfa/SycReFDU4AeB.9HCJmtMLZRI9tOddfJf1MhkEbsiSi\",\"expiry\":1503916224,\"last_token\":\"$2a$10$QmPply0qplCnB61ijR6AauHX3b/f4Y9aViiW32gdKhkiYYGUmb6iK\",\"updated_at\":\"2015-08-28T10:30:24.211+00:00\"},\"aT8tKEk0LBN-FlYk90H_4A\":{\"token\":\"$2a$10$dYy/.mAI.T4ZCClMuuoIm.x.WZZ0RyTRM73NPAcwxayHEtln0iiK6\",\"expiry\":1503641260,\"last_token\":\"$2a$10$4B1/juGwK7TrU3MSR.VlDeN/Eb4LNaS3p8/aI0SbY0CqEUuQqQF5y\",\"updated_at\":\"2015-08-25T06:07:40.457+00:00\"},\"ZzElevUQE-Hj3r6U796fBw\":{\"token\":\"$2a$10$CqZ345Ktmev6mUL1VYM3Ce0PJupEPjZONN1/WVs8aOGqtE7gHSK9e\",\"expiry\":1503737752,\"last_token\":\"$2a$10$TiIfhLpK.iCI.wzx5eGSWuu.5L6o86p4sPMcdhLv3d6pTjq6HLRTm\",\"updated_at\":\"2015-08-26T08:55:52.761+00:00\"},\"1X4prMlCi_DRKN8RKM7xBQ\":{\"token\":\"$2a$10$6nvQQaeoWNLn9o.xqmiUruRnUYT1HhakYhy6R9wlWga0zgr19NJIm\",\"expiry\":1503817300,\"last_token\":\"$2a$10$Aa4ahKq9/pF282se5OFhPuR3jRiBmHRiRGpQDEKNNkI2JQRN7j6ou\",\"updated_at\":\"2015-08-27T07:01:41.021+00:00\"},\"Ts_dxgo8ZSxBi6HVTVqiRw\":{\"token\":\"$2a$10$cUAFDAoL7JUkUQtb3peW8uRa/forP1knPBIYkewNygtH562Oj346G\",\"expiry\":1503916240,\"last_token\":\"$2a$10$NN/oAef.94onfLsNlJEt2e98YYtsQYghJqq32jTnX4XR/66cTBDq.\",\"updated_at\":\"2015-08-28T10:30:41.101+00:00\"},\"OBTkpK9gzse3h9cJ6oR0HQ\":{\"token\":\"$2a$10$f/ocnelJLSRMQmmvJl0u6e8PpaGrYNw5nVRqeD2WCR.0FuWf9dgra\",\"expiry\":1503934183,\"last_token\":\"$2a$10$m218EWdqIUA/RgezAcL9eevoND2ZCiWto1LepGTlmoHfbaXki34bu\",\"updated_at\":\"2015-08-28T15:29:47.112+00:00\"},\"akHiBwkYi-SHhmmTTxAS1Q\":{\"token\":\"$2a$10$QSIZOzWC0SFsV71ndlSQM.Xx7idQTRjNLAUnK1pVmZA6XFhbINjXG\",\"expiry\":1503930780,\"last_token\":\"$2a$10$T/i664BdQnNCehqkjxYFweGRoT9Xq535yEJVoA/S9BME2TFs0J/Ka\",\"updated_at\":\"2015-08-28T14:33:01.366+00:00\"}}', `updated_at` = '2015-08-28 15:29:47' WHERE `users`.`id` = 3
2015-08-28 17:29:47.79078582 +0200 CEST [web-1]   [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:29:47.790860629 +0200 CEST [web-1] Completed 201 Created in 415ms (Views: 1.8ms | ActiveRecord: 12.1ms)
2015-08-28 17:29:48.791012301 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:48 +0000
2015-08-28 17:29:48.791096777 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:48.791169882 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 9.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adac5f5c8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-1uenx6p.pdf>, @original_filename="cours copy 9.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 9.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:48.791239138 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:48.79126448 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:48.791277126 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:48.791296338 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.791308504 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:48.791362242 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:48.791379212 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:48.791407575 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.791419156 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:48.791433306 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:48.791444815 +0200 CEST [web-1] Organization
2015-08-28 17:29:48.791506951 +0200 CEST [web-1] Node
2015-08-28 17:29:48.791532572 +0200 CEST [web-1] Chapter
2015-08-28 17:29:48.791547398 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:48.791559252 +0200 CEST [web-1] Completed 500 Internal Server Error in 101ms (ActiveRecord: 3.0ms)
2015-08-28 17:29:48.79161294 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:48.791633556 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:48 +0000
2015-08-28 17:29:48.791661325 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:48.791696903 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:48.791743886 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 11.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adaf14598 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1btwtff.pdf>, @original_filename="cours copy 11.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 11.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:48.791757401 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:48.791777114 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:48.791790421 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.5ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:48.791811089 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.791862149 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:48.791885879 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:48.791897749 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:48.791921763 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.791939524 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:48.792000956 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:48.792014527 +0200 CEST [web-1] Organization
2015-08-28 17:29:48.792035274 +0200 CEST [web-1] Node
2015-08-28 17:29:48.792055554 +0200 CEST [web-1] Chapter
2015-08-28 17:29:48.792123337 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:48.79214296 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:48 +0000
2015-08-28 17:29:48.792157876 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:48.792223398 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 12.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adb050c40 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-g8k279.pdf>, @original_filename="cours copy 12.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 12.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:48.792250224 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:48.792262534 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:48.792276523 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:48.792288975 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.792317074 +0200 CEST [web-1]   [1m[35mNode Exists (0.8ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:48.792333848 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:48 +0000
2015-08-28 17:29:48.792348492 +0200 CEST [web-1]   [1m[36mNode Load (0.5ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:48.792359775 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:48.792373979 +0200 CEST [web-1]   [1m[35mChapter Exists (0.8ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:48.792385207 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 10.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adb14d530 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-w0za6t.pdf>, @original_filename="cours copy 10.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 10.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:48.792419511 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:48.792437572 +0200 CEST [web-1]   [1m[36mChapter Load (0.5ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:48.792489262 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:48.792510944 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:48.792525383 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:48.792536579 +0200 CEST [web-1] Organization
2015-08-28 17:29:48.79255256 +0200 CEST [web-1] Node
2015-08-28 17:29:48.792578039 +0200 CEST [web-1] Chapter
2015-08-28 17:29:48.792598533 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.7ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:48.792645359 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:48.792666729 +0200 CEST [web-1] Completed 500 Internal Server Error in 100ms (ActiveRecord: 2.7ms)
2015-08-28 17:29:48.792678328 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:48.792718585 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:48.79273584 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:48.792750082 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.792939126 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775788, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>17}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"971ae383-34bf-49ab-9fe5-7981a01ba79c", :request=>{:params=>{"title"=>"cours copy 9.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 9.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-17-1uenx6p.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 9.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"ca52c238-c805-4fab-82d6-ed394a6f10e7"}, :person=>{}}}
2015-08-28 17:29:49.79320723 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.793232276 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.793248934 +0200 CEST [web-1] Completed 500 Internal Server Error in 104ms (ActiveRecord: 4.1ms)
2015-08-28 17:29:49.79326387 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:49.793334338 +0200 CEST [web-1]   [1m[35mOrganization Load (91.1ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:49.793357044 +0200 CEST [web-1]   [1m[36mNode Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:49.793372314 +0200 CEST [web-1]   [1m[35mUser Load (0.9ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.793384155 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:49.793449916 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.793485717 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775788, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>13}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"fe05a394-bd7e-4d60-ae18-00d937f8da95", :request=>{:params=>{"title"=>"cours copy 11.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 11.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-13-1btwtff.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 11.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"dc2bf349-74e4-4074-8b93-f05f88a34761"}, :person=>{}}}
2015-08-28 17:29:49.793603921 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.793626898 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.793639302 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.793711522 +0200 CEST [web-1]   [1m[36mNode Load (94.7ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:49.793728923 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:49.793746257 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.793758063 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775788, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>25}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"245a36b1-82c4-4160-857c-3a0e69761589", :request=>{:params=>{"title"=>"cours copy 12.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 12.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-25-g8k279.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 12.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"648b6adb-6075-49d3-a251-5ad31d2c1f2a"}, :person=>{}}}
2015-08-28 17:29:49.793879647 +0200 CEST [web-1]   [1m[35mChapter Exists (6.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:49.793950567 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.793989222 +0200 CEST [web-1]   [1m[36mChapter Load (1.0ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:49.794013131 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:49.794071781 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:49.794089259 +0200 CEST [web-1] Organization
2015-08-28 17:29:49.79411789 +0200 CEST [web-1] Node
2015-08-28 17:29:49.794135892 +0200 CEST [web-1] Chapter
2015-08-28 17:29:49.794204935 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.794256956 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.794289199 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:48 +0000
2015-08-28 17:29:49.794343226 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:49.794368438 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 13.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab00eba90 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1r9usli.pdf>, @original_filename="cours copy 13.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 13.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:49.794420624 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:49.794440327 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:49.794454713 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:49.794466399 +0200 CEST [web-1]   [1m[35mOrganization Load (0.6ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:49.794507288 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:49.794522643 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:49.794536806 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:49.79454845 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:49.794567163 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:49.794579368 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:49.794618662 +0200 CEST [web-1] Organization
2015-08-28 17:29:49.794669382 +0200 CEST [web-1] Node
2015-08-28 17:29:49.794687819 +0200 CEST [web-1] Chapter
2015-08-28 17:29:49.79469909 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.794712605 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.794723925 +0200 CEST [web-1]   [1m[36mUser Load (102.0ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.794801469 +0200 CEST [web-1] Completed 500 Internal Server Error in 100ms (ActiveRecord: 3.0ms)
2015-08-28 17:29:49.794818978 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:49.794833161 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.794844787 +0200 CEST [web-1] Completed 500 Internal Server Error in 404ms (ActiveRecord: 296.5ms)
2015-08-28 17:29:49.794858212 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:49.794889484 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.79490785 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:49.794919267 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.794932734 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:49 +0000
2015-08-28 17:29:49.794944008 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:49.794959704 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 14.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc15f560 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-13a279e.pdf>, @original_filename="cours copy 14.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 14.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:49.795013405 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:49.795059197 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:49.795075417 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775789, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>13}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"ee961cb5-09a1-4e50-a863-279227d975e2", :request=>{:params=>{"title"=>"cours copy 13.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 13.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-13-1r9usli.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 13.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"6a0bd155-9e42-4c96-9c72-0aefaca44087"}, :person=>{}}}
2015-08-28 17:29:49.795168454 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.795188107 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:29:49.79520054 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.795214581 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:29:49.795226184 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:49.795240142 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:49.79525292 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:29:49.795267541 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:29:49.795290421 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:49.795308514 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:49.795320597 +0200 CEST [web-1] Organization
2015-08-28 17:29:49.795334967 +0200 CEST [web-1] Node
2015-08-28 17:29:49.795346908 +0200 CEST [web-1] Chapter
2015-08-28 17:29:49.795361131 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.795372824 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:49.79538968 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.795405762 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775789, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>25}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"eefbfdf2-77f0-43be-a3ee-4499a1ad4ac3", :request=>{:params=>{"title"=>"cours copy 10.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 10.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-25-w0za6t.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 10.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"9f7e1c56-a8e3-44a1-be9f-214f9e729e85"}, :person=>{}}}
2015-08-28 17:29:49.795439274 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.795454841 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.795466577 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.795481013 +0200 CEST [web-1] Completed 500 Internal Server Error in 119ms (ActiveRecord: 2.7ms)
2015-08-28 17:29:49.795493035 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:49.795510655 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:49.795534215 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.795551795 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:49.795563981 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.795580553 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775789, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>17}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"a5fd803d-aa64-41c4-a01e-97a9dfa51543", :request=>{:params=>{"title"=>"cours copy 14.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 14.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-17-13a279e.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 14.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"15992501-7582-4ff0-b972-845ba347720d"}, :person=>{}}}
2015-08-28 17:29:49.795614301 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:49.795629656 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:49.795644419 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:49.795656043 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:49.795670585 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=5f2d7fab-0269-4a3e-b032-2cf960042f5c (only available if report was successful)
2015-08-28 17:29:49.795682505 +0200 CEST [web-1] 
2015-08-28 17:29:49.795697257 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:49.795708826 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:49.795723196 +0200 CEST [web-1] 
2015-08-28 17:29:49.795734939 +0200 CEST [web-1] 
2015-08-28 17:29:50.795867244 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:50.795953968 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=4472517b-a8b8-44fa-b287-c69feeb6c00b (only available if report was successful)
2015-08-28 17:29:50.795983572 +0200 CEST [web-1] 
2015-08-28 17:29:50.796017258 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:50.796037044 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:50.796049271 +0200 CEST [web-1] 
2015-08-28 17:29:50.796063338 +0200 CEST [web-1] 
2015-08-28 17:29:50.796074905 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:50.796092236 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=8940aa3b-fe9b-4680-a963-0df2b6f78a04 (only available if report was successful)
2015-08-28 17:29:50.796104886 +0200 CEST [web-1] 
2015-08-28 17:29:50.796119619 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:50.796170992 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:50.796189854 +0200 CEST [web-1] 
2015-08-28 17:29:50.796205229 +0200 CEST [web-1] 
2015-08-28 17:29:50.796219989 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:50.79623139 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=4ec97b1d-f46c-47d1-8c23-e013278983b2 (only available if report was successful)
2015-08-28 17:29:50.796264102 +0200 CEST [web-1] 
2015-08-28 17:29:50.796276104 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:50.796292161 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:50.796303699 +0200 CEST [web-1] 
2015-08-28 17:29:50.796317252 +0200 CEST [web-1] 
2015-08-28 17:29:50.79632874 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:50.796342274 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=e9c5cae8-2615-4f2d-baa8-4008409ce3f6 (only available if report was successful)
2015-08-28 17:29:50.796353618 +0200 CEST [web-1] 
2015-08-28 17:29:50.796367117 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:50.796406357 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:50.796426085 +0200 CEST [web-1] 
2015-08-28 17:29:50.796437441 +0200 CEST [web-1] 
2015-08-28 17:29:50.796451165 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:50.796462642 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=74eb86f6-f82b-4ba2-8422-0b5e6e3a74c1 (only available if report was successful)
2015-08-28 17:29:50.796476472 +0200 CEST [web-1] 
2015-08-28 17:29:50.796519468 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:50.796538447 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:50.796550151 +0200 CEST [web-1] 
2015-08-28 17:29:50.796564064 +0200 CEST [web-1] 
2015-08-28 17:29:50.796575494 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:29:50 +0000
2015-08-28 17:29:50.796589795 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:29:50.796606374 +0200 CEST [web-1]   Parameters: {"title"=>"cours copy 15.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab4190910 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-18rkjx2.pdf>, @original_filename="cours copy 15.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 15.pdf\"\r\nContent-Type: application/pdf\r\n">}
2015-08-28 17:29:50.796646577 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:29:50.796664546 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:29:50.796678685 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:29:50.796690442 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:50.796704316 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1
2015-08-28 17:29:50.7967161 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 203 LIMIT 1[0m
2015-08-28 17:29:50.796730369 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 203 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:29:50.796745565 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 203  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:29:50.79678004 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:29:50.796794716 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:29:50.796814203 +0200 CEST [web-1] Organization
2015-08-28 17:29:50.796826316 +0200 CEST [web-1] Node
2015-08-28 17:29:50.796840467 +0200 CEST [web-1] Chapter
2015-08-28 17:29:50.796851935 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:51.7970162 +0200 CEST [web-1] Completed 500 Internal Server Error in 99ms (ActiveRecord: 2.8ms)
2015-08-28 17:29:51.79713297 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `email' for nil:NilClass
2015-08-28 17:29:51.797200413 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1[0m
2015-08-28 17:29:51.797241139 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:29:51.797296557 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:51.797338183 +0200 CEST [web-1] [Rollbar] Error processing the payload: Encoding::UndefinedConversionError, "\xC4" from ASCII-8BIT to UTF-8. Payload: {"access_token"=>"b514bd7a83964db89b30bd65a0826d9a", "data"=>{:timestamp=>1440775790, :environment=>"production", :level=>"error", :language=>"ruby", :framework=>"Rails: 4.2.1", :server=>{:host=>"angularapp-web-1", :root=>"/app", :pid=>13}, :notifier=>{:name=>"rollbar-gem", :version=>"1.5.1"}, :body=>{:trace=>{:frames=>[{:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"block in spawn_thread"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/thread_pool.rb", :lineno=>104, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>262, :method=>"block in run"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>375, :method=>"process_client"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/server.rb", :lineno=>507, :method=>"handle_request"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/puma-2.11.1/lib/puma/configuration.rb", :lineno=>82, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/application.rb", :lineno=>164, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/engine.rb", :lineno=>518, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/cors.rb", :lineno=>72, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/sendfile.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/static.rb", :lineno=>113, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>28, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/runtime.rb", :lineno=>18, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/methodoverride.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/request_id.rb", :lineno=>21, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>26, :method=>"tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/tagged_logging.rb", :lineno=>68, :method=>"block in tagged"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>20, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/railties-4.2.1/lib/rails/rack/logger.rb", :lineno=>38, :method=>"call_app"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>30, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>17, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar.rb", :lineno=>799, :method=>"scoped"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rollbar-1.5.1/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>24, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>78, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_call_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>88, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/callbacks.rb", :lineno=>29, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb", :lineno=>649, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/query_cache.rb", :lineno=>36, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/cookies.rb", :lineno=>560, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>220, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb", :lineno=>225, :method=>"context"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/flash.rb", :lineno=>260, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/params_parser.rb", :lineno=>27, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/head.rb", :lineno=>13, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/conditionalget.rb", :lineno=>38, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/rack-1.6.0/lib/rack/etag.rb", :lineno=>24, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>34, :method=>"catch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/manager.rb", :lineno=>35, :method=>"block in call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>819, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>30, :method=>"each"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/journey/router.rb", :lineno=>43, :method=>"block in serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>43, :method=>"serve"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/routing/route_set.rb", :lineno=>74, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>237, :method=>"block in action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rack_delegation.rb", :lineno=>13, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal.rb", :lineno=>196, :method=>"dispatch"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionview-4.2.1/lib/action_view/rendering.rb", :lineno=>30, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>137, :method=>"process"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.1/lib/active_record/railties/controller_runtime.rb", :lineno=>18, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/params_wrapper.rb", :lineno=>250, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications/instrumenter.rb", :lineno=>20, :method=>"instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb", :lineno=>164, :method=>"block in instrument"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/instrumentation.rb", :lineno=>32, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rescue.rb", :lineno=>29, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>19, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>81, :method=>"run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>776, :method=>"_run_process_action_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>92, :method=>"_run_callbacks"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>505, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>555, :method=>"block (2 levels) in compile"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.1/lib/active_support/callbacks.rb", :lineno=>117, :method=>"call"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/callbacks.rb", :lineno=>20, :method=>"block in process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/rendering.rb", :lineno=>10, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/abstract_controller/base.rb", :lineno=>198, :method=>"process_action"}, {:filename=>"/app/vendor/bundle/ruby/2.1.0/gems/actionpack-4.2.1/lib/action_controller/metal/implicit_render.rb", :lineno=>4, :method=>"send_action"}, {:filename=>"/app/app/controllers/awsdocuments_controller.rb", :lineno=>18, :method=>"create"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `email' for nil:NilClass"}, :extra=>{}}}, :uuid=>"a0974272-0f84-4c98-ba78-967737c06ce1", :request=>{:params=>{"title"=>"cours copy 15.pdf", "node_id"=>"203", "chapter_id"=>"0", "content"=>"{}", "file"=>{:filename=>"cours copy 15.pdf", :type=>"application/pdf", :name=>"file", :tempfile=>#<Tempfile:/tmp/RackMultipart20150828-13-18rkjx2.pdf>, :head=>"Content-Disposition: form-data; name=\"file\"; filename=\"cours copy 15.pdf\"\r\nContent-Type: application/pdf\r\n"}, "controller"=>"awsdocuments", "action"=>"create"}, :url=>"http://api.unisphere.eu/awsdocuments", :user_ip=>"88.169.99.128", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"api.unisphere.eu", "X-Forwarded-Proto"=>"http", "X-Real-Ip"=>"88.169.99.128", "X-Forwarded-Port"=>"80", "X-Forwarded-For"=>"88.169.99.128", "Connection"=>"keep-alive", "Accept"=>"application/json, text/plain, */*", "Uid"=>"hello@unisphere.eu", "Token-Type"=>"Bearer", "If-Modified-Since"=>"Mon, 26 Jul 1997 05:00:00 GMT", "X-Requested-With"=>"XMLHttpRequest", "Accept-Language"=>"en-us", "Accept-Encoding"=>"gzip, deflate", "Origin"=>"http://lycee-kleber.unisphere.eu", "Access-Token"=>"_NlrpXP6_39CnXYmoXJgdg", "Expiry"=>"1503934168", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9", "Referer"=>"http://lycee-kleber.unisphere.eu/", "X-Csrf-Token"=>"Y2R974XJ7gGaHX89rlLVY379EV2YZYnhWbhEoeaTWmOr7Nh+9cNze2W1S19zj3WJBVZDTcwjYaAuN1icoQ24dw==", "Client"=>"OBTkpK9gzse3h9cJ6oR0HQ"}, :cookies=>{}, :session=>{:skip=>true}, :method=>"POST", :route=>{}, :request_id=>"c6df19ae-2e10-4fe7-b53f-56ec72a68d2b"}, :person=>{}}}
2015-08-28 17:29:51.79741018 +0200 CEST [web-1] [Rollbar] Reporting internal error encountered while sending data to Rollbar.
2015-08-28 17:29:51.79744662 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'hello@unisphere.eu' LIMIT 1
2015-08-28 17:29:51.7974642 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:29:51.797478989 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:29:51.797490316 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=38a32f38-658e-4ece-b9c3-c606a09ac689 (only available if report was successful)
2015-08-28 17:29:51.79750486 +0200 CEST [web-1] 
2015-08-28 17:29:51.797516074 +0200 CEST [web-1] NoMethodError (undefined method `email' for nil:NilClass):
2015-08-28 17:29:51.797530126 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:18:in `create'
2015-08-28 17:29:51.797542141 +0200 CEST [web-1] 
2015-08-28 17:29:51.797573071 +0200 CEST [web-1] 
2015-08-28 17:32:11.814734173 +0200 CEST [web-1] Started GET "/chapters?node_id=174" for 88.169.99.128 at 2015-08-28 15:32:11 +0000
2015-08-28 17:32:11.814906025 +0200 CEST [web-1] Processing by ChaptersController#index as JSON
2015-08-28 17:32:11.815034238 +0200 CEST [web-1]   Parameters: {"node_id"=>"174"}
2015-08-28 17:32:11.815146224 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:32:11.815287307 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:32:11.815392295 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:32:11.815452757 +0200 CEST [web-1]   [1m[35mNode Exists (0.5ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:32:11.815467236 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:32:11.81557696 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174
2015-08-28 17:32:11.815663149 +0200 CEST [web-1]   [1m[36mAwsdocument Load (0.5ms)[0m  [1mSELECT `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`chapter_id` = 216[0m
2015-08-28 17:32:11.815725941 +0200 CEST [web-1] Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 2.5ms)
2015-08-28 17:33:02.822113539 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.822321861 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.822411588 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (9th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac03eb410 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-jrj2sg.png>, @original_filename="ésdsfs (9th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (9th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.822452136 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.822549927 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.822650534 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:02.822694367 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.822718148 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.822733338 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.822789418 +0200 CEST [web-1]   [1m[35mChapter Exists (0.5ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:02.822814791 +0200 CEST [web-1]   [1m[36mChapter Load (0.5ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.822827824 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.822843385 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.822855605 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.822906165 +0200 CEST [web-1] Node
2015-08-28 17:33:02.822926985 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.822977902 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:02.823050374 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.823073025 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.823085544 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (7th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc437260 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-183ndye.png>, @original_filename="ésdsfs (7th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (7th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.823100182 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.823111984 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.823166659 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:02.823179249 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.823193438 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.823204994 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.823223581 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:02.823236037 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.823287538 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.82330626 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.823320917 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.823332492 +0200 CEST [web-1] Node
2015-08-28 17:33:02.823345988 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.82335784 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:02.823371398 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.823432679 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.823468222 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (6th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc8d2db0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-15rqmw6.png>, @original_filename="ésdsfs (6th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (6th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.823480876 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.82352325 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.823563878 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:02.823607306 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:02.823644773 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.823662149 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.823693337 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:02.823707387 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:02.823718517 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.823732075 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.823743342 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.823756763 +0200 CEST [web-1] Node
2015-08-28 17:33:02.823768046 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.823781647 +0200 CEST [web-1]   [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:02.823825016 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.823848186 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.823860099 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.82387346 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.823887368 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.823901613 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.823948338 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (5th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac0441f90 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-12mgbnl.png>, @original_filename="ésdsfs (5th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (5th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.823967161 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.823978809 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.823992388 +0200 CEST [web-1]   [1m[36m (2.9ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:02.824003579 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.8ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:02.824017854 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (9th copy).png', '_sdsfs__9th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')[0m
2015-08-28 17:33:02.824058581 +0200 CEST [web-1]   [1m[35mOrganization Load (1.9ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:02.824081342 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.824093106 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.824106674 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:02.82411779 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:02.824145331 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824158625 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.824209568 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.824224228 +0200 CEST [web-1] Node
2015-08-28 17:33:02.824238101 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.824249395 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:02.824265962 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.824277482 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824291296 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:02.824302679 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (7th copy).png', '_sdsfs__7th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')
2015-08-28 17:33:02.824316349 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.824335701 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824349801 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:02.824361114 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (6th copy).png', '_sdsfs__6th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')[0m
2015-08-28 17:33:02.824374948 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.824386284 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824399617 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.824412754 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (8th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab04e6cd0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-10mazz0.png>, @original_filename="ésdsfs (8th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (8th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.824445836 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.824463588 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.824477528 +0200 CEST [web-1]   [1m[35m (3.1ms)[0m  BEGIN
2015-08-28 17:33:02.824488836 +0200 CEST [web-1]   [1m[36mOrganization Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:02.824507465 +0200 CEST [web-1]   [1m[35mSQL (0.8ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (5th copy).png', '_sdsfs__5th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')
2015-08-28 17:33:02.824519621 +0200 CEST [web-1]   [1m[36mOrganization Load (1.7ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.824533223 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.82454476 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.824573373 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:02.824590428 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.824604614 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824616089 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.82462959 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.824643306 +0200 CEST [web-1] Node
2015-08-28 17:33:02.824657029 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.824668338 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:02.824686335 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__7th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=51fda99feea14b996488a2a2412b88b7fe7c698cc8c8f1bc182cfc883820d7fe' WHERE `awsdocuments`.`id` = 96[0m
2015-08-28 17:33:02.824713365 +0200 CEST [web-1]   [1m[35m (2.1ms)[0m  COMMIT
2015-08-28 17:33:02.824733488 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:02.824745473 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:02.824764471 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.824776082 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.824789752 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.824800806 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (4th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc68c308 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-1qodh75.png>, @original_filename="ésdsfs (4th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (4th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.824814457 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.824826045 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.824854045 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__6th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=1689f321b1963dc20fb8062959328ba71257d756e8d347863d58db2bbad330d6' WHERE `awsdocuments`.`id` = 97
2015-08-28 17:33:02.824865496 +0200 CEST [web-1]   [1m[36mOrganization Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:02.824879469 +0200 CEST [web-1]   [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.824890946 +0200 CEST [web-1]   [1m[35mOrganization Load (0.9ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:02.824904213 +0200 CEST [web-1]   [1m[36m (1.0ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:02.824915728 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:02.824945019 +0200 CEST [web-1]   [1m[35mSQL (1.8ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (8th copy).png', '_sdsfs__8th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')
2015-08-28 17:33:02.824976081 +0200 CEST [web-1]   [1m[36mNode Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.825002164 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.825014283 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:02.825028091 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:02.825039394 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.825052695 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.825063895 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.825077087 +0200 CEST [web-1] Node
2015-08-28 17:33:02.825143738 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.825182504 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:02.825212455 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.602+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:02.825249709 +0200 CEST [web-1]   [1m[36mUser Load (73.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:02.825279012 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  COMMIT
2015-08-28 17:33:02.82531587 +0200 CEST [web-1] Completed 201 Created in 391ms (Views: 1.8ms | ActiveRecord: 9.2ms)
2015-08-28 17:33:02.825345911 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.607+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11
2015-08-28 17:33:02.825380439 +0200 CEST [web-1]   [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.825408083 +0200 CEST [web-1] Completed 201 Created in 379ms (Views: 1.9ms | ActiveRecord: 81.9ms)
2015-08-28 17:33:02.825438922 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:02.825468672 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.825505196 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:02.825530975 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (4th copy).png', '_sdsfs__4th_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')[0m
2015-08-28 17:33:02.825562027 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__9th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=28ae712f98bf33c0436bc96bc487cbb42b582ed7a0b9b7a10dfc003b64c6b675' WHERE `awsdocuments`.`id` = 95
2015-08-28 17:33:02.82558709 +0200 CEST [web-1]   [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.825617747 +0200 CEST [web-1]   [1m[35m (1.0ms)[0m  BEGIN
2015-08-28 17:33:02.8256439 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:02.825671871 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.825706979 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.825740012 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (another copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab43fa368 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-i4t6xs.png>, @original_filename="ésdsfs (another copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (another copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.825768103 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.82579914 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.736+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11
2015-08-28 17:33:02.825824663 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.825856956 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:02.825884809 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:02.82591573 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.825940352 +0200 CEST [web-1]   [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.825968232 +0200 CEST [web-1] Completed 201 Created in 553ms (Views: 1.9ms | ActiveRecord: 13.4ms)
2015-08-28 17:33:02.82599311 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:02.826023028 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (3rd copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab83a55a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-r8breq.png>, @original_filename="ésdsfs (3rd copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (3rd copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:02.826049345 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:02.826080045 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:02.826105889 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.826135098 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.826169749 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:02.826202003 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:02.826229042 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:02.826260172 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:02.826351177 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.82643935 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.826497468 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.826578642 +0200 CEST [web-1] Node
2015-08-28 17:33:02.826652756 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.826717218 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:02.826747287 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:02.826779185 +0200 CEST [web-1]   [1m[35mNode Load (0.5ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:02.82680597 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:02.826835501 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:02.826861809 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:02.826890901 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:02.826916091 +0200 CEST [web-1] Organization
2015-08-28 17:33:02.826945858 +0200 CEST [web-1] Node
2015-08-28 17:33:02.826973336 +0200 CEST [web-1] Chapter
2015-08-28 17:33:02.827008108 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:02.827037615 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__5th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=784ea2f74362a2dd8c696ee7975c71a155507b3766f4d2115ab9740b5c0635a5' WHERE `awsdocuments`.`id` = 98
2015-08-28 17:33:02.827071383 +0200 CEST [web-1]   [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.827099573 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:02.82713122 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:02.827157332 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.772+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11
2015-08-28 17:33:02.82718836 +0200 CEST [web-1]   [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:02.827215478 +0200 CEST [web-1] Completed 201 Created in 481ms (Views: 1.8ms | ActiveRecord: 13.8ms)
2015-08-28 17:33:02.827247106 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__8th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=b65cf1e17a41b136481d4fb0884fa0a43f9fcb4f843fcf504a5d551d96e7ba4a' WHERE `awsdocuments`.`id` = 99
2015-08-28 17:33:02.827272494 +0200 CEST [web-1]   [1m[36m (3.3ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.827407163 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  BEGIN
2015-08-28 17:33:03.827493036 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:03.827523619 +0200 CEST [web-1]   [1m[36mSQL (2.5ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__4th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153302Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=23dd3925a403b18769bde834953f0500a9f95657cf4cbb70c158a4be949f7b2c' WHERE `awsdocuments`.`id` = 100[0m
2015-08-28 17:33:03.827565925 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.827589263 +0200 CEST [web-1]   [1m[35mUser Load (2.1ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:03.827601764 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs (copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc8b17c8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-107pryx.png>, @original_filename="ésdsfs (copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs (copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.827616334 +0200 CEST [web-1]   [1m[36m (3.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.827692217 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.827711839 +0200 CEST [web-1]   [1m[35mSQL (3.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.836+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11
2015-08-28 17:33:03.827724009 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.827759033 +0200 CEST [web-1]   [1m[36m (2.7ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:03.827787825 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.8ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:03.827808955 +0200 CEST [web-1]   [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.827821888 +0200 CEST [web-1] Completed 201 Created in 440ms (Views: 7.5ms | ActiveRecord: 27.6ms)
2015-08-28 17:33:03.827836371 +0200 CEST [web-1]   [1m[35mOrganization Load (0.8ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:03.827848254 +0200 CEST [web-1]   [1m[36mUser Load (3.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.827862692 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.827890714 +0200 CEST [web-1]   [1m[36mSQL (0.9ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:02.849+00:00\"}}', `updated_at` = '2015-08-28 15:33:02' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:03.827935474 +0200 CEST [web-1]   [1m[35mNode Load (1.8ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.827951509 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.827966022 +0200 CEST [web-1]   [1m[35m (2.5ms)[0m  COMMIT
2015-08-28 17:33:03.827994226 +0200 CEST [web-1] Completed 201 Created in 332ms (Views: 1.8ms | ActiveRecord: 27.2ms)
2015-08-28 17:33:03.82800931 +0200 CEST [web-1]   [1m[36mChapter Load (0.5ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.828021257 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828050582 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.828072592 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.828087381 +0200 CEST [web-1] Node
2015-08-28 17:33:03.828098789 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.828145006 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:03.828183909 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.828203864 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828216241 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:03.828250023 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.828277556 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828291394 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:03.828308489 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:03.82832243 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (another copy).png', '_sdsfs__another_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')
2015-08-28 17:33:03.828333855 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (3rd copy).png', '_sdsfs__3rd_copy_.png', 3, 11, 216, '2015-08-28 15:33:02', '2015-08-28 15:33:02')[0m
2015-08-28 17:33:03.828353226 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.82836576 +0200 CEST [web-1]   Parameters: {"title"=>"ésdsfs.png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab83a5f08 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-6ogm3t.png>, @original_filename="ésdsfs.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA9sdsfs.png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.828397948 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.82841635 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.828445614 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:03.828462642 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:03.82849493 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.828507478 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.828521473 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.828532996 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:03.828549003 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828567814 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.828581428 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.828592786 +0200 CEST [web-1] Node
2015-08-28 17:33:03.828625324 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.828637485 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:03.828650829 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:03.82866213 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:02 +0000
2015-08-28 17:33:03.828676282 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.828699153 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (9th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab0346a88 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-dtm7ta.png>, @original_filename="ásdadas (9th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (9th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.828713742 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.828725223 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.828745112 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:03.828756754 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.828770553 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.828781768 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.828795413 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:03.828806588 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.828838787 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828853772 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.828867946 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.82888171 +0200 CEST [web-1] Node
2015-08-28 17:33:03.828895304 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.828906308 +0200 CEST [web-1]   [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:03.8289215 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.828933299 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.828969204 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:03.828981315 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs (copy).png', '_sdsfs__copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')
2015-08-28 17:33:03.828995107 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.829006115 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.829019942 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:03.829031058 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ésdsfs.png', '_sdsfs.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')[0m
2015-08-28 17:33:03.829045183 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.829070636 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.829117444 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.829131569 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (8th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac032b5e8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-1ow8sih.png>, @original_filename="ásdadas (8th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (8th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.829145832 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.829157317 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.829170822 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:03.829182364 +0200 CEST [web-1]   [1m[35m (0.8ms)[0m  BEGIN
2015-08-28 17:33:03.829221113 +0200 CEST [web-1]   [1m[36mOrganization Load (2.5ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.829237726 +0200 CEST [web-1]   [1m[35mSQL (1.0ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (9th copy).png', '_sdadas__9th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')
2015-08-28 17:33:03.829255282 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=d86647a089cc6d63373bbc1964ffff89543c8e00537515b6cac8a0098ae7b8b3' WHERE `awsdocuments`.`id` = 103[0m
2015-08-28 17:33:03.829266955 +0200 CEST [web-1]   [1m[35m (2.0ms)[0m  COMMIT
2015-08-28 17:33:03.829295836 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:03.829313009 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:03.829327731 +0200 CEST [web-1]   [1m[36mNode Exists (1.6ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.829339859 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.829353962 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.224+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:03.829365216 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.829379133 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:03.829405553 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.829426234 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.829437952 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.829451117 +0200 CEST [web-1] Node
2015-08-28 17:33:03.829466722 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.829480334 +0200 CEST [web-1]   [1m[35m (2.0ms)[0m  COMMIT
2015-08-28 17:33:03.829491477 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:03.829505301 +0200 CEST [web-1] Completed 201 Created in 392ms (Views: 2.1ms | ActiveRecord: 11.9ms)
2015-08-28 17:33:03.829516739 +0200 CEST [web-1]   [1m[35mSQL (1.5ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__another_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=8233592160c1b3d50b561d6d2fb3902e330d71346f6b4ce39ab479a6e61f0f45' WHERE `awsdocuments`.`id` = 101
2015-08-28 17:33:03.829532377 +0200 CEST [web-1]   [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.829543559 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:03.829576904 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.829595298 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.252+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11
2015-08-28 17:33:03.829609928 +0200 CEST [web-1]   [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.829621331 +0200 CEST [web-1] Completed 201 Created in 521ms (Views: 1.9ms | ActiveRecord: 11.2ms)
2015-08-28 17:33:03.829637421 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:03.829648815 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.829664816 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (7th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab04eb668 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-kecpnk.png>, @original_filename="ásdadas (7th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (7th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.829691602 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.829714187 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.829743228 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:03.829777658 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.829793795 +0200 CEST [web-1]   [1m[35mNode Exists (1.2ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.829808325 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=128a4c49b8540ffdfb93b87f9d60c6e8a7b7be058707a82b0527a4e426f326da' WHERE `awsdocuments`.`id` = 104[0m
2015-08-28 17:33:03.829820058 +0200 CEST [web-1]   [1m[35mNode Load (0.7ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.829834291 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.829846582 +0200 CEST [web-1]   [1m[35m (2.4ms)[0m  COMMIT
2015-08-28 17:33:03.829860876 +0200 CEST [web-1]   [1m[36mChapter Load (2.8ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.829872589 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.829886433 +0200 CEST [web-1]   [1m[35m (0.7ms)[0m  BEGIN
2015-08-28 17:33:03.829898389 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.829915428 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.829927353 +0200 CEST [web-1] Node
2015-08-28 17:33:03.829941393 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.82995312 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.829967093 +0200 CEST [web-1]   [1m[35mUser Load (3.0ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:03.829978707 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:03.829992597 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.830004283 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (6th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac064fda0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-imwu18.png>, @original_filename="ásdadas (6th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (6th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.830017884 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.830029591 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.830043715 +0200 CEST [web-1]   [1m[36mOrganization Exists (2.0ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:03.830055385 +0200 CEST [web-1]   [1m[35mOrganization Load (4.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:03.830069313 +0200 CEST [web-1]   [1m[36mNode Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.83008099 +0200 CEST [web-1]   [1m[35mNode Load (3.1ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.830094924 +0200 CEST [web-1]   [1m[36mChapter Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.830106905 +0200 CEST [web-1]   [1m[35mChapter Load (1.2ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:03.83012101 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.83013474 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.83014868 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.830169074 +0200 CEST [web-1] Node
2015-08-28 17:33:03.830204012 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.830221528 +0200 CEST [web-1]   [1m[36mUser Load (2.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:03.830235934 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.830247903 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.830262118 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdsfs__3rd_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=1bcfdef96ee3eaf14ab74026d5239887f518bf931755a649e16a9a24b3f73ff2' WHERE `awsdocuments`.`id` = 102
2015-08-28 17:33:03.830274496 +0200 CEST [web-1]   [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830288483 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:33:03.830300321 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:03.830314363 +0200 CEST [web-1]   [1m[35mSQL (1.5ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (8th copy).png', '_sdadas__8th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')
2015-08-28 17:33:03.830326119 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.830340153 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.83035168 +0200 CEST [web-1]   [1m[36mSQL (182.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.344+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:03.830365768 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:03.830377595 +0200 CEST [web-1]   [1m[36mUser Load (97.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.830415398 +0200 CEST [web-1]   [1m[36m (3.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830432638 +0200 CEST [web-1] Completed 201 Created in 585ms (Views: 1.8ms | ActiveRecord: 198.1ms)
2015-08-28 17:33:03.830448248 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (7th copy).png', '_sdadas__7th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')
2015-08-28 17:33:03.830460421 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.534+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11
2015-08-28 17:33:03.830474814 +0200 CEST [web-1]   [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830486722 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__9th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=2adfe82d20180f091ec82cc8cdb02805a0d54823752bdec6eeb5c1f62134ee4c' WHERE `awsdocuments`.`id` = 105
2015-08-28 17:33:03.830500887 +0200 CEST [web-1] Completed 201 Created in 801ms (Views: 2.9ms | ActiveRecord: 108.0ms)
2015-08-28 17:33:03.830512824 +0200 CEST [web-1]   [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830530416 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:03.830542537 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.830560053 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.550+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11
2015-08-28 17:33:03.830572401 +0200 CEST [web-1]   [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830596309 +0200 CEST [web-1] Completed 201 Created in 568ms (Views: 1.7ms | ActiveRecord: 13.7ms)
2015-08-28 17:33:03.830625929 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:03.830655387 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.830669288 +0200 CEST [web-1]   [1m[35m (0.5ms)[0m  BEGIN
2015-08-28 17:33:03.830683434 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (6th copy).png', '_sdadas__6th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')[0m
2015-08-28 17:33:03.830695392 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__8th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=cbcf78c5e6b096c7cdb707213b4debc18e2505ce6ea607dfba902aadfee7b4b6' WHERE `awsdocuments`.`id` = 106
2015-08-28 17:33:03.830712136 +0200 CEST [web-1]   [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830723713 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:03.830742623 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:03.830755209 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.633+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11
2015-08-28 17:33:03.830769365 +0200 CEST [web-1]   [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:03.830781048 +0200 CEST [web-1] Completed 201 Created in 442ms (Views: 1.9ms | ActiveRecord: 52.7ms)
2015-08-28 17:33:03.830795016 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:03.83080699 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.830820828 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (4th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac4331138 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1m690hm.png>, @original_filename="ásdadas (4th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (4th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.830832668 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.83084691 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.83085882 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:03.830893666 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:03.830904979 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.830942224 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.830958537 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:03.830972885 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:03.830984281 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.830997927 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.831008999 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.831022375 +0200 CEST [web-1] Node
2015-08-28 17:33:03.831033629 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.831057441 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:03.831069108 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:03.831083385 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.831095146 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (5th copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac46206c8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-i1txb5.png>, @original_filename="ásdadas (5th copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (5th copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.83110916 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.831121153 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.83113541 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:03.831147478 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:03.831161676 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.831177982 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:03.831194025 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (3rd copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac45114a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-rvfzpa.png>, @original_filename="ásdadas (3rd copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (3rd copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:03.831206605 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:03.831220678 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:03.831232587 +0200 CEST [web-1]   [1m[35mNode Exists (0.5ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.831246593 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.831258825 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:03.83127312 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.831284967 +0200 CEST [web-1]   [1m[35mChapter Exists (0.5ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:03.831300399 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.831312792 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.831327099 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.831338834 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.831352681 +0200 CEST [web-1] Node
2015-08-28 17:33:03.831364471 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.831380215 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:03.831392321 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:03.831406407 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:03.831418543 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:03.831432649 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:03.831444517 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:03.831460623 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:03.831472486 +0200 CEST [web-1] Organization
2015-08-28 17:33:03.831486787 +0200 CEST [web-1] Node
2015-08-28 17:33:03.831498456 +0200 CEST [web-1] Chapter
2015-08-28 17:33:03.831512567 +0200 CEST [web-1]   [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:04.831662968 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.831745551 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:03 +0000
2015-08-28 17:33:04.83179243 +0200 CEST [web-1]   [1m[35mSQL (90.3ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__7th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=6d6d58c520b93ffbb9ff2a73a308e2784680204fcc26c0e9a48fcafc396b4456' WHERE `awsdocuments`.`id` = 107
2015-08-28 17:33:04.831814739 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.831830575 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.831849911 +0200 CEST [web-1]   [1m[35m (2.4ms)[0m  COMMIT
2015-08-28 17:33:04.831890056 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (4th copy).png', '_sdadas__4th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')[0m
2015-08-28 17:33:04.831980676 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.832009554 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.832042714 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.832141369 +0200 CEST [web-1]   [1m[36mSQL (91.7ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__6th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153303Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=d2f66a7d583d706941ea38d14c76d015510f3c5077e541aaae1984365295625a' WHERE `awsdocuments`.`id` = 108[0m
2015-08-28 17:33:04.832237872 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.832269667 +0200 CEST [web-1]   [1m[36m (0.5ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.832294547 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.832398792 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (another copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abcb37380 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-26v2oq.png>, @original_filename="ásdadas (another copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (another copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.832479366 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.832543988 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.832584222 +0200 CEST [web-1]   [1m[35m (2.1ms)[0m  COMMIT
2015-08-28 17:33:04.83265938 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (3rd copy).png', '_sdadas__3rd_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')
2015-08-28 17:33:04.832684969 +0200 CEST [web-1]   [1m[36m (3.2ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.832701587 +0200 CEST [web-1]   [1m[35m (1.4ms)[0m  BEGIN
2015-08-28 17:33:04.8327133 +0200 CEST [web-1]   [1m[36mOrganization Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.832727412 +0200 CEST [web-1]   [1m[35mUser Load (1.1ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:04.832739137 +0200 CEST [web-1]   [1m[35m (2.4ms)[0m  BEGIN
2015-08-28 17:33:04.832752746 +0200 CEST [web-1]   [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (5th copy).png', '_sdadas__5th_copy_.png', 3, 11, 216, '2015-08-28 15:33:03', '2015-08-28 15:33:03')[0m
2015-08-28 17:33:04.832765397 +0200 CEST [web-1]   [1m[36mOrganization Load (3.1ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.832780669 +0200 CEST [web-1]   [1m[35mSQL (1.2ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.902+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11
2015-08-28 17:33:04.832792991 +0200 CEST [web-1]   [1m[35mUser Load (4.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:04.832807544 +0200 CEST [web-1]   [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.83281977 +0200 CEST [web-1] Completed 201 Created in 580ms (Views: 2.1ms | ActiveRecord: 108.1ms)
2015-08-28 17:33:04.832834394 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:03.907+00:00\"}}', `updated_at` = '2015-08-28 15:33:03' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:04.832846347 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  COMMIT
2015-08-28 17:33:04.832861302 +0200 CEST [web-1] Completed 201 Created in 548ms (Views: 1.9ms | ActiveRecord: 121.4ms)
2015-08-28 17:33:04.832873279 +0200 CEST [web-1]   [1m[35mNode Exists (0.5ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.832887722 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.832899654 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:04.832918592 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.832931348 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.832945778 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.832957759 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.832971884 +0200 CEST [web-1] Node
2015-08-28 17:33:04.832983839 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.832998398 +0200 CEST [web-1]   [1m[35mUser Load (0.7ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:04.833010483 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.833025002 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.833037286 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas (copy).png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8abc69a0c0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-55c02q.png>, @original_filename="ásdadas (copy).png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas (copy).png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.833051433 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.833063478 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.833104463 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.833146758 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:04.833168461 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.833180835 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.833195682 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:04.833207153 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:04.833221423 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.833248682 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.833271842 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.83329589 +0200 CEST [web-1] Node
2015-08-28 17:33:04.833312772 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.833324435 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:04.833338259 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.83339695 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.833418135 +0200 CEST [web-1]   Parameters: {"title"=>"ásdadas.png", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab05b3168 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-d689vo.png>, @original_filename="ásdadas.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"\xC3\xA1sdadas.png\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.833430315 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.833444141 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.8334556 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.833477847 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:04.833543063 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.833571199 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.8335839 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:04.833599855 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:04.833639667 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.833664683 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.833676755 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.833690493 +0200 CEST [web-1] Node
2015-08-28 17:33:04.833701784 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.833715205 +0200 CEST [web-1]   [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:04.833726597 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.833742316 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.833762915 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__4th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=717771dc91ea5df0da6443247378163b94fbeff695e978a4ee7ba1c070b6c16c' WHERE `awsdocuments`.`id` = 109[0m
2015-08-28 17:33:04.833781379 +0200 CEST [web-1]   [1m[35m (2.5ms)[0m  COMMIT
2015-08-28 17:33:04.833793075 +0200 CEST [web-1]   [1m[36m (2.9ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.83380702 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  BEGIN
2015-08-28 17:33:04.833818276 +0200 CEST [web-1]   [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (another copy).png', '_sdadas__another_copy_.png', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')[0m
2015-08-28 17:33:04.833856836 +0200 CEST [web-1]   [1m[35mUser Load (1.9ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:04.833913302 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.173+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:04.833942876 +0200 CEST [web-1]   [1m[35m (2.1ms)[0m  COMMIT
2015-08-28 17:33:04.833956293 +0200 CEST [web-1] Completed 201 Created in 497ms (Views: 1.8ms | ActiveRecord: 13.6ms)
2015-08-28 17:33:04.833970275 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.833981594 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.833995276 +0200 CEST [web-1]   [1m[35mSQL (1.8ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__3rd_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=6d4b367d2be33a5a9a08639b9ed01c58ebc8917a4e26d171d27ef80a5c03e536' WHERE `awsdocuments`.`id` = 110
2015-08-28 17:33:04.834019244 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.834039728 +0200 CEST [web-1]   [1m[35m (3.3ms)[0m  COMMIT
2015-08-28 17:33:04.834051367 +0200 CEST [web-1]   [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas (copy).png', '_sdadas__copy_.png', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')[0m
2015-08-28 17:33:04.83406508 +0200 CEST [web-1]   [1m[35m (1.7ms)[0m  BEGIN
2015-08-28 17:33:04.834076406 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:04.834119706 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.228+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:04.834184726 +0200 CEST [web-1]   [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.834215954 +0200 CEST [web-1] Completed 201 Created in 531ms (Views: 1.9ms | ActiveRecord: 13.1ms)
2015-08-28 17:33:04.834234792 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.834249034 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.834269802 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.834296283 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.834309604 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (9th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab4656b20 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-11z6b6w.PNG>, @original_filename="DIAPOSITIVE1 (9th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (9th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.834323415 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.834334762 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.834350834 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.834362692 +0200 CEST [web-1]   [1m[35mOrganization Load (1.1ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:04.8343773 +0200 CEST [web-1]   [1m[35mSQL (41.3ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__5th_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=3770bf06f4d3206e88e92aca2cac8ff7713250f2ffcf9380c0c67ea7175a0d47' WHERE `awsdocuments`.`id` = 111
2015-08-28 17:33:04.834389523 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.834403765 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.834415665 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.834429757 +0200 CEST [web-1]   [1m[35m (2.9ms)[0m  COMMIT
2015-08-28 17:33:04.83444144 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:04.834457822 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:04.834470003 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.834483868 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.834495627 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.834523694 +0200 CEST [web-1] Node
2015-08-28 17:33:04.834540659 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.834555649 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:04.83456749 +0200 CEST [web-1]   [1m[36mSQL (3.8ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('ásdadas.png', '_sdadas.png', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')[0m
2015-08-28 17:33:04.834582178 +0200 CEST [web-1]   [1m[35m (1.7ms)[0m  BEGIN
2015-08-28 17:33:04.834594096 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:04.834608569 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.290+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:04.834620614 +0200 CEST [web-1]   [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.834634785 +0200 CEST [web-1] Completed 201 Created in 597ms (Views: 2.9ms | ActiveRecord: 56.0ms)
2015-08-28 17:33:04.834650624 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.834665203 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.834678688 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (8th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab8600aa0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-qs93ua.PNG>, @original_filename="DIAPOSITIVE1 (8th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (8th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.834694846 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.834707167 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.834745973 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:04.834763273 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.834781822 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.834802801 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.83481881 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:04.83483093 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.83484526 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.834857028 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.834870818 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.834882516 +0200 CEST [web-1] Node
2015-08-28 17:33:04.834943899 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.835026087 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:04.835099744 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.835122477 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.835137821 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (7th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad857b8a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-4xwip7.PNG>, @original_filename="DIAPOSITIVE1 (7th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (7th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.835149517 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.835166455 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.835178002 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:04.835192364 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.835204464 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.835218657 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.835230447 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:04.835245198 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.835256859 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.835271433 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.835283325 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.835297157 +0200 CEST [web-1] Node
2015-08-28 17:33:04.835309291 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.835323205 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:04.83534025 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.835355053 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.835367083 +0200 CEST [web-1]   [1m[35mSQL (1.6ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__another_copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=c78bea72b1b2bd5c308ffc994bf7214ceec643cb1060a6d607222432dff50a4d' WHERE `awsdocuments`.`id` = 112
2015-08-28 17:33:04.835381439 +0200 CEST [web-1]   [1m[36m (0.6ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.835393733 +0200 CEST [web-1]   [1m[35m (3.1ms)[0m  COMMIT
2015-08-28 17:33:04.83540781 +0200 CEST [web-1]   [1m[36mSQL (3.2ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (9th copy).PNG', 'DIAPOSITIVE1__9th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')[0m
2015-08-28 17:33:04.835420094 +0200 CEST [web-1]   [1m[35m (34.1ms)[0m  BEGIN
2015-08-28 17:33:04.835436724 +0200 CEST [web-1]   [1m[36mUser Load (2.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:04.83545108 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.520+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:04.835465808 +0200 CEST [web-1]   [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.835477729 +0200 CEST [web-1] Completed 201 Created in 631ms (Views: 1.9ms | ActiveRecord: 119.7ms)
2015-08-28 17:33:04.835492317 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.835504173 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.835521692 +0200 CEST [web-1]   [1m[36mSQL (1.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas__copy_.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=cadff764ded2ac702df6ba1be3ae2899d23620a53de14d17031b858d6c319938' WHERE `awsdocuments`.`id` = 113[0m
2015-08-28 17:33:04.83553608 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:04.835550929 +0200 CEST [web-1]   [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.835562898 +0200 CEST [web-1]   [1m[35mSQL (2.8ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (8th copy).PNG', 'DIAPOSITIVE1__8th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')
2015-08-28 17:33:04.835577493 +0200 CEST [web-1]   [1m[36m (1.8ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.835589212 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:04.835603411 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.544+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:04.835615311 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  COMMIT
2015-08-28 17:33:04.835629228 +0200 CEST [web-1] Completed 201 Created in 527ms (Views: 1.8ms | ActiveRecord: 16.0ms)
2015-08-28 17:33:04.835640983 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.835655096 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.835666874 +0200 CEST [web-1]   [1m[36mSQL (1.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/_sdadas.png?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=864efe94f9e6b2aab3dcb4945fdcd02fd27ee53c6866ba299f40ddeb3d7a4063' WHERE `awsdocuments`.`id` = 114[0m
2015-08-28 17:33:04.835682283 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:04.835694394 +0200 CEST [web-1]   [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:04.835708575 +0200 CEST [web-1]   [1m[35mSQL (2.8ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (7th copy).PNG', 'DIAPOSITIVE1__7th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')
2015-08-28 17:33:04.835720353 +0200 CEST [web-1]   [1m[36m (1.7ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:04.835735012 +0200 CEST [web-1]   [1m[35mUser Load (0.8ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:04.835746741 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.608+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:04.835760939 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:04.835772625 +0200 CEST [web-1] Completed 201 Created in 574ms (Views: 1.8ms | ActiveRecord: 16.2ms)
2015-08-28 17:33:04.835786624 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.835798385 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.835821538 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (6th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ab05d6ac8 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-dfhou.PNG>, @original_filename="DIAPOSITIVE1 (6th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (6th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.835834829 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.835849323 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.83586107 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.835875539 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:04.835887428 +0200 CEST [web-1]   [1m[36mNode Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.835901473 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.835913303 +0200 CEST [web-1]   [1m[36mChapter Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:04.835927796 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:04.835940221 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.835954167 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.835966071 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.835980296 +0200 CEST [web-1] Node
2015-08-28 17:33:04.835991788 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.836010888 +0200 CEST [web-1]   [1m[36mUser Load (0.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:04.836023385 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.836038245 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.83605003 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (5th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad8095b90 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1tujvk6.PNG>, @original_filename="DIAPOSITIVE1 (5th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (5th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.836066425 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.836078407 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.83609306 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:04.836105243 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.836119681 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.836131486 +0200 CEST [web-1]   [1m[36mNode Load (0.4ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.836148593 +0200 CEST [web-1]   [1m[35mChapter Exists (0.5ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:04.836161008 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:04.836175321 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.836187437 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.836203043 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.836218166 +0200 CEST [web-1] Node
2015-08-28 17:33:04.836232244 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.836244418 +0200 CEST [web-1]   [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:04.836258851 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:04 +0000
2015-08-28 17:33:04.836270977 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:04.836284978 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (4th copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad9902638 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-c994mj.PNG>, @original_filename="DIAPOSITIVE1 (4th copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (4th copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:04.83629748 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:04.836311813 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:04.836323981 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:04.836341728 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:04.836353979 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:04.836370298 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:04.836382752 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:04.836396957 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:04.836408976 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.836422763 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:04.836434623 +0200 CEST [web-1] Organization
2015-08-28 17:33:04.8364485 +0200 CEST [web-1] Node
2015-08-28 17:33:04.836460357 +0200 CEST [web-1] Chapter
2015-08-28 17:33:04.836474688 +0200 CEST [web-1]   [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:04.836486379 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:04.836500416 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:04.836512137 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:04.836526331 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (6th copy).PNG', 'DIAPOSITIVE1__6th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')[0m
2015-08-28 17:33:05.836642536 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.836731399 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.836808568 +0200 CEST [web-1]   [1m[36mSQL (1.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__9th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=2217b8d5c189e81cb3c8dcbdfb3538b1f7be3b4b96f5d9710ed90918277c9124' WHERE `awsdocuments`.`id` = 115[0m
2015-08-28 17:33:05.836882011 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:05.83691435 +0200 CEST [web-1]   [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.836927687 +0200 CEST [web-1]   [1m[35mSQL (2.8ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (5th copy).PNG', 'DIAPOSITIVE1__5th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')
2015-08-28 17:33:05.836942868 +0200 CEST [web-1]   [1m[36m (0.6ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.836989091 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.837010275 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.863+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.837042378 +0200 CEST [web-1]   [1m[35m (2.2ms)[0m  COMMIT
2015-08-28 17:33:05.837063679 +0200 CEST [web-1] Completed 201 Created in 597ms (Views: 1.8ms | ActiveRecord: 15.9ms)
2015-08-28 17:33:05.837077732 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__8th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=641ab18be553e08c43ab16341541db8a6653bcf337ad0cb0f7e29e395a10f923' WHERE `awsdocuments`.`id` = 116
2015-08-28 17:33:05.837174768 +0200 CEST [web-1]   [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.837198858 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:05.837264136 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:05.837314706 +0200 CEST [web-1]   [1m[35mSQL (1.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.890+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:05.837358552 +0200 CEST [web-1]   [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.837373551 +0200 CEST [web-1] Completed 201 Created in 558ms (Views: 1.7ms | ActiveRecord: 12.0ms)
2015-08-28 17:33:05.837387803 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.837399682 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.837436131 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  BEGIN
2015-08-28 17:33:05.837458409 +0200 CEST [web-1]   [1m[36mSQL (2.2ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__7th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=11f98a7b07ea1f612f58013878077da8ec3db93ccc1707f77496253b329c4ad8' WHERE `awsdocuments`.`id` = 117[0m
2015-08-28 17:33:05.837529469 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (4th copy).PNG', 'DIAPOSITIVE1__4th_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:04', '2015-08-28 15:33:04')
2015-08-28 17:33:05.837570824 +0200 CEST [web-1]   [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.837618625 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:05.837631305 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:05.837656757 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.912+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:05.837686444 +0200 CEST [web-1]   [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.837737627 +0200 CEST [web-1] Completed 201 Created in 515ms (Views: 1.8ms | ActiveRecord: 13.0ms)
2015-08-28 17:33:05.837754558 +0200 CEST [web-1]   [1m[35mSQL (0.7ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__6th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153304Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=dce8f73885cf8039b299235a21fe9f97285894d4b08961f763c2cf34999845bd' WHERE `awsdocuments`.`id` = 118
2015-08-28 17:33:05.837778105 +0200 CEST [web-1]   [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.83778973 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:05.837818978 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:05.837857953 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:04.991+00:00\"}}', `updated_at` = '2015-08-28 15:33:04' WHERE `users`.`id` = 11
2015-08-28 17:33:05.837874129 +0200 CEST [web-1]   [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.837885639 +0200 CEST [web-1] Completed 201 Created in 375ms (Views: 1.8ms | ActiveRecord: 9.7ms)
2015-08-28 17:33:05.837899355 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__5th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=bd51b9a8cd07ef3dc075bbb2efb47f6375f45c84bc676c5ca589e48be49a46fd' WHERE `awsdocuments`.`id` = 119[0m
2015-08-28 17:33:05.837926641 +0200 CEST [web-1]   [1m[35m (2.5ms)[0m  COMMIT
2015-08-28 17:33:05.8379772 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.83799911 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.838014849 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.035+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.838026646 +0200 CEST [web-1]   [1m[35m (2.7ms)[0m  COMMIT
2015-08-28 17:33:05.838040716 +0200 CEST [web-1] Completed 201 Created in 383ms (Views: 2.3ms | ActiveRecord: 13.0ms)
2015-08-28 17:33:05.83805236 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:05 +0000
2015-08-28 17:33:05.838115165 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:05.838131462 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (another copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad9bf1498 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1qliirh.PNG>, @original_filename="DIAPOSITIVE1 (another copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (another copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:05.838145701 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:05.838157133 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:05.838170818 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:05.838182666 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:05.83821158 +0200 CEST [web-1]   [1m[36mNode Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:05.838223764 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:05.838237878 +0200 CEST [web-1]   [1m[36mChapter Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1[0m
2015-08-28 17:33:05.838249621 +0200 CEST [web-1]   [1m[35mChapter Load (0.4ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:05.83826868 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.838280646 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:05.838340574 +0200 CEST [web-1] Organization
2015-08-28 17:33:05.838366819 +0200 CEST [web-1] Node
2015-08-28 17:33:05.838391632 +0200 CEST [web-1] Chapter
2015-08-28 17:33:05.83840414 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:05.838418209 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:05 +0000
2015-08-28 17:33:05.838429352 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:05.838515011 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ac05a49f0 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-17-gde8q4.PNG>, @original_filename="DIAPOSITIVE1 (copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:05.838537039 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:05.838551416 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:05.8385626 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:05.838592401 +0200 CEST [web-1]   [1m[36mOrganization Load (0.4ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:05.838604707 +0200 CEST [web-1]   [1m[35mNode Exists (0.4ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:05.838618469 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:05.838636548 +0200 CEST [web-1]   [1m[35mChapter Exists (0.4ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:05.838650313 +0200 CEST [web-1]   [1m[36mChapter Load (0.5ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:05.838678511 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.838701471 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:05.838736275 +0200 CEST [web-1] Organization
2015-08-28 17:33:05.83877921 +0200 CEST [web-1] Node
2015-08-28 17:33:05.838815903 +0200 CEST [web-1] Chapter
2015-08-28 17:33:05.838859371 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:05.838897928 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:05 +0000
2015-08-28 17:33:05.838926068 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:05.838938811 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1 (3rd copy).PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8adabe1060 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-25-1ov14q4.PNG>, @original_filename="DIAPOSITIVE1 (3rd copy).PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1 (3rd copy).PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:05.838952698 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:05.838980739 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:05.83900572 +0200 CEST [web-1]   [1m[35mSQL (2.1ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__4th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=3137477c2655afa4828a92f039d537c5e1c5ff5d86a89c87e120388bcaa2917c' WHERE `awsdocuments`.`id` = 120
2015-08-28 17:33:05.839019227 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:05.83903352 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:05.83904658 +0200 CEST [web-1]   [1m[36m (2.6ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:05.839061016 +0200 CEST [web-1]   [1m[35mNode Exists (3.1ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:05.839072941 +0200 CEST [web-1]   [1m[36m (0.9ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839088595 +0200 CEST [web-1]   [1m[35mNode Load (0.9ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:05.839100653 +0200 CEST [web-1]   [1m[36mUser Load (1.8ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:05.839116824 +0200 CEST [web-1]   [1m[35mChapter Exists (3.1ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:05.839129105 +0200 CEST [web-1]   [1m[36mSQL (0.8ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.099+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.839143272 +0200 CEST [web-1]   [1m[35mChapter Load (1.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1
2015-08-28 17:33:05.839155017 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.839168899 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:05.839180804 +0200 CEST [web-1] Organization
2015-08-28 17:33:05.839194492 +0200 CEST [web-1] Node
2015-08-28 17:33:05.839206248 +0200 CEST [web-1] Chapter
2015-08-28 17:33:05.839219818 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:05.839231568 +0200 CEST [web-1]   [1m[35m (90.8ms)[0m  COMMIT
2015-08-28 17:33:05.839245607 +0200 CEST [web-1] Completed 201 Created in 488ms (Views: 1.9ms | ActiveRecord: 104.1ms)
2015-08-28 17:33:05.839257839 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.839271761 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.839283718 +0200 CEST [web-1] Started POST "/awsdocuments" for 88.169.99.128 at 2015-08-28 15:33:05 +0000
2015-08-28 17:33:05.839297488 +0200 CEST [web-1]   [1m[35m (0.4ms)[0m  BEGIN
2015-08-28 17:33:05.839309087 +0200 CEST [web-1] Processing by AwsdocumentsController#create as JSON
2015-08-28 17:33:05.839323984 +0200 CEST [web-1]   Parameters: {"title"=>"DIAPOSITIVE1.PNG", "node_id"=>"174", "chapter_id"=>"0", "content"=>"{}", "file"=>#<ActionDispatch::Http::UploadedFile:0x007f8ad9f56598 @tempfile=#<Tempfile:/tmp/RackMultipart20150828-13-1gjm56b.PNG>, @original_filename="DIAPOSITIVE1.PNG", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"DIAPOSITIVE1.PNG\"\r\nContent-Type: image/png\r\n">}
2015-08-28 17:33:05.839336261 +0200 CEST [web-1]   [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (another copy).PNG', 'DIAPOSITIVE1__another_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:05', '2015-08-28 15:33:05')[0m
2015-08-28 17:33:05.839350053 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:05.839361784 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:05.839375953 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.3ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:05.839402886 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:05.839417133 +0200 CEST [web-1]   [1m[35mNode Exists (0.3ms)[0m  SELECT  1 AS one FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:05.839428981 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`organization_id` = 3 AND `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:05.839452066 +0200 CEST [web-1]   [1m[35mChapter Exists (0.3ms)[0m  SELECT  1 AS one FROM `chapters` WHERE `chapters`.`node_id` = 174 AND `chapters`.`id` = 0 LIMIT 1
2015-08-28 17:33:05.839463674 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.839477891 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.839500341 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`node_id` = 174  ORDER BY `chapters`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:05.839514961 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.839526783 +0200 CEST [web-1] lycee-kleber
2015-08-28 17:33:05.83954083 +0200 CEST [web-1] Organization
2015-08-28 17:33:05.839552676 +0200 CEST [web-1] Node
2015-08-28 17:33:05.839566774 +0200 CEST [web-1] Chapter
2015-08-28 17:33:05.839578837 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:05.83959306 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839604797 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (copy).PNG', 'DIAPOSITIVE1__copy_.PNG', 3, 11, 216, '2015-08-28 15:33:05', '2015-08-28 15:33:05')
2015-08-28 17:33:05.839619012 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.839630778 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.839644973 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.83965675 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1 (3rd copy).PNG', 'DIAPOSITIVE1__3rd_copy_.PNG', 3, 11, 216, '2015-08-28 15:33:05', '2015-08-28 15:33:05')
2015-08-28 17:33:05.839673677 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=816aeb3259e797f631a37849ed52a927a5bae06e6bb00709917bba47bb8b80a9' WHERE `awsdocuments`.`id` = 122[0m
2015-08-28 17:33:05.839685667 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:05.839699593 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839711136 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.839733447 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.428+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.839746204 +0200 CEST [web-1] gabriel@muller.uk.net
2015-08-28 17:33:05.839760394 +0200 CEST [web-1] ----------------------------------------
2015-08-28 17:33:05.83977225 +0200 CEST [web-1]   [1m[35m (1.7ms)[0m  COMMIT
2015-08-28 17:33:05.83978621 +0200 CEST [web-1] Completed 201 Created in 375ms (Views: 1.8ms | ActiveRecord: 8.9ms)
2015-08-28 17:33:05.839798144 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839812635 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  INSERT INTO `awsdocuments` (`title`, `content`, `organization_id`, `user_id`, `chapter_id`, `created_at`, `updated_at`) VALUES ('DIAPOSITIVE1.PNG', 'DIAPOSITIVE1.PNG', 3, 11, 216, '2015-08-28 15:33:05', '2015-08-28 15:33:05')
2015-08-28 17:33:05.839824486 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__3rd_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=082281d5bfcbea5621e3355eeb44e2f40c1d46ae77ef24f79aeaa464a4e6ebda' WHERE `awsdocuments`.`id` = 123[0m
2015-08-28 17:33:05.839838425 +0200 CEST [web-1]   [1m[35m (2.2ms)[0m  COMMIT
2015-08-28 17:33:05.839850476 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839868956 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.83988209 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.465+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.839896286 +0200 CEST [web-1]   [1m[35m (2.0ms)[0m  COMMIT
2015-08-28 17:33:05.839907969 +0200 CEST [web-1] Completed 201 Created in 383ms (Views: 1.8ms | ActiveRecord: 16.8ms)
2015-08-28 17:33:05.839922293 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__another_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=e3739d07c212c11bbdcd616d2abd395bdf03f87013352bf2dd85e9242c18f806' WHERE `awsdocuments`.`id` = 121[0m
2015-08-28 17:33:05.839934043 +0200 CEST [web-1]   [1m[35m (2.2ms)[0m  COMMIT
2015-08-28 17:33:05.839948042 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.839959473 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.839973287 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.596+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.839985313 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:05.840006452 +0200 CEST [web-1] Completed 201 Created in 558ms (Views: 1.8ms | ActiveRecord: 10.2ms)
2015-08-28 17:33:05.840018775 +0200 CEST [web-1]   [1m[36mSQL (1.0ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153305Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=09e516159d8704054dda2797b9df7a546f26d1718d6f1892a0c65f18ef9af422' WHERE `awsdocuments`.`id` = 124[0m
2015-08-28 17:33:05.840032749 +0200 CEST [web-1]   [1m[35m (2.0ms)[0m  COMMIT
2015-08-28 17:33:05.840044367 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:05.840060303 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:05.840072094 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"expiry\":1503934382,\"last_token\":\"$2a$10$vxVPE2.Nh51lck/dxJRWM.UtEHUNmXu91gzA0qpCxXcV7ZIwblKZm\",\"updated_at\":\"2015-08-28T15:33:05.610+00:00\"}}', `updated_at` = '2015-08-28 15:33:05' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:05.840086325 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:05.840098054 +0200 CEST [web-1] Completed 201 Created in 375ms (Views: 1.9ms | ActiveRecord: 9.3ms)
2015-08-28 17:33:25.842588518 +0200 CEST [web-1] Started DELETE "/awsdocuments/124" for 88.169.99.128 at 2015-08-28 15:33:25 +0000
2015-08-28 17:33:25.842683827 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:25.842722717 +0200 CEST [web-1]   Parameters: {"id"=>"124"}
2015-08-28 17:33:25.84275524 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:25.842801016 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:25.842837189 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:25.842888112 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:25.84290676 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 124 LIMIT 1[0m
2015-08-28 17:33:25.842921634 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.6ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 124 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:25.842933381 +0200 CEST [web-1]   [1m[36mChapter Load (0.5ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:25.84294737 +0200 CEST [web-1]   [1m[35mNode Load (0.5ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:25.842958767 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:25.843006138 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 124 LIMIT 1
2015-08-28 17:33:25.843021633 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:25.843036696 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:25' WHERE `awsdocuments`.`id` = 124
2015-08-28 17:33:25.843048474 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153325Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=f84ac5331353c32c7ee3737f8b65efc5d2a05ae920754022751cc4fd3152467c' WHERE `awsdocuments`.`id` = 124[0m
2015-08-28 17:33:25.843062242 +0200 CEST [web-1]   [1m[35m (2.5ms)[0m  COMMIT
2015-08-28 17:33:25.843075187 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:25.843090446 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:26.843204446 +0200 CEST [web-1]   [1m[36mSQL (0.7ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:25.899+00:00\"}}', `updated_at` = '2015-08-28 15:33:25' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:26.84330265 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  COMMIT
2015-08-28 17:33:26.843350215 +0200 CEST [web-1] Completed 204 No Content in 210ms (ActiveRecord: 11.8ms)
2015-08-28 17:33:26.843364809 +0200 CEST [web-1] Started DELETE "/awsdocuments/121" for 88.169.99.128 at 2015-08-28 15:33:26 +0000
2015-08-28 17:33:26.843379684 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:26.843391563 +0200 CEST [web-1]   Parameters: {"id"=>"121"}
2015-08-28 17:33:26.843405815 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:26.843417673 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:26.843445788 +0200 CEST [web-1]   [1m[36mOrganization Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:26.843499372 +0200 CEST [web-1]   [1m[35mOrganization Load (0.5ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:26.843519814 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 121 LIMIT 1[0m
2015-08-28 17:33:26.843531961 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.5ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 121 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:26.843553088 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:26.84356674 +0200 CEST [web-1]   [1m[35mNode Load (0.5ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:26.843634082 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:26.843647241 +0200 CEST [web-1] Started DELETE "/awsdocuments/121" for 88.169.99.128 at 2015-08-28 15:33:26 +0000
2015-08-28 17:33:26.843661166 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:26.843672746 +0200 CEST [web-1]   Parameters: {"id"=>"121"}
2015-08-28 17:33:26.843686527 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:26.843698143 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:26.84373835 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:26.843750644 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:26.843764584 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 121 LIMIT 1[0m
2015-08-28 17:33:26.843775968 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.4ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 121 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:26.843789735 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:26.843801229 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:26.843815708 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:26.843852005 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.7ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 121 LIMIT 1
2015-08-28 17:33:26.843872444 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.843884126 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:26' WHERE `awsdocuments`.`id` = 121
2015-08-28 17:33:26.843902596 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__another_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153326Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=b6aaf91fd124b3b7e420983223607e1432059b16db4d1f80ad4dd07babb0d55a' WHERE `awsdocuments`.`id` = 121[0m
2015-08-28 17:33:26.843915113 +0200 CEST [web-1]   [1m[35m (3.2ms)[0m  COMMIT
2015-08-28 17:33:26.84392889 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.843957008 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:26.844002946 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:26.365+00:00\"}}', `updated_at` = '2015-08-28 15:33:26' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:26.844018856 +0200 CEST [web-1]   [1m[35m (2.2ms)[0m  COMMIT
2015-08-28 17:33:26.844032589 +0200 CEST [web-1] Completed 204 No Content in 170ms (ActiveRecord: 14.4ms)
2015-08-28 17:33:26.844043976 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 121 LIMIT 1
2015-08-28 17:33:26.844057574 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.844068826 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:26' WHERE `awsdocuments`.`id` = 121
2015-08-28 17:33:26.844082948 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__another_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153326Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=b6aaf91fd124b3b7e420983223607e1432059b16db4d1f80ad4dd07babb0d55a' WHERE `awsdocuments`.`id` = 121[0m
2015-08-28 17:33:26.844114032 +0200 CEST [web-1]   [1m[35m (2.6ms)[0m  COMMIT
2015-08-28 17:33:26.844129575 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.844151059 +0200 CEST [web-1]   [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:26.84416542 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:26.417+00:00\"}}', `updated_at` = '2015-08-28 15:33:26' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:26.844176921 +0200 CEST [web-1]   [1m[35m (3.1ms)[0m  COMMIT
2015-08-28 17:33:26.844206648 +0200 CEST [web-1] Completed 204 No Content in 115ms (ActiveRecord: 11.7ms)
2015-08-28 17:33:26.844224071 +0200 CEST [web-1] Started DELETE "/awsdocuments/123" for 88.169.99.128 at 2015-08-28 15:33:26 +0000
2015-08-28 17:33:26.844238194 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:26.844258932 +0200 CEST [web-1]   Parameters: {"id"=>"123"}
2015-08-28 17:33:26.844272959 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:26.844284187 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:26.8442978 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:26.844309156 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:26.844322798 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 123 LIMIT 1[0m
2015-08-28 17:33:26.844355824 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.6ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 123 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:26.844378276 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:26.844390476 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:26.844404394 +0200 CEST [web-1]   [1m[36mUser Load (0.7ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:26.844415548 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.5ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 123 LIMIT 1
2015-08-28 17:33:26.844428833 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.844439926 +0200 CEST [web-1] Started DELETE "/awsdocuments/123" for 88.169.99.128 at 2015-08-28 15:33:26 +0000
2015-08-28 17:33:26.844453803 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:26' WHERE `awsdocuments`.`id` = 123
2015-08-28 17:33:26.844487399 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__3rd_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153326Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=b1959d12c6eb1b0dce1d4f969ec64a57d0f542c7b1a552ff3976108d95ed28a2' WHERE `awsdocuments`.`id` = 123[0m
2015-08-28 17:33:26.844501793 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:26.844513324 +0200 CEST [web-1]   Parameters: {"id"=>"123"}
2015-08-28 17:33:26.844526714 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:26.84453814 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:26.844551893 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:26.844578765 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  COMMIT
2015-08-28 17:33:26.844619573 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:26.844633091 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:26.844646842 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 123 LIMIT 1[0m
2015-08-28 17:33:26.844658148 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:26.844671891 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.6ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 123 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:26.844683176 +0200 CEST [web-1] Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.0ms)
2015-08-28 17:33:26.844696889 +0200 CEST [web-1] [Rollbar] Reporting exception: undefined method `chapter_id' for nil:NilClass
2015-08-28 17:33:26.844744629 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:26.844763424 +0200 CEST [web-1]   [1m[36mSQL (0.6ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:26.813+00:00\"}}', `updated_at` = '2015-08-28 15:33:26' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:26.844775064 +0200 CEST [web-1]   [1m[35m (2.3ms)[0m  COMMIT
2015-08-28 17:33:26.844788865 +0200 CEST [web-1] Completed 204 No Content in 120ms (ActiveRecord: 11.0ms)
2015-08-28 17:33:27.84490941 +0200 CEST [web-1] [Rollbar] Scheduling payload
2015-08-28 17:33:27.84499064 +0200 CEST [web-1] [Rollbar] Sending payload
2015-08-28 17:33:27.84505701 +0200 CEST [web-1] Started DELETE "/awsdocuments/122" for 88.169.99.128 at 2015-08-28 15:33:27 +0000
2015-08-28 17:33:27.845142972 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:27.845211724 +0200 CEST [web-1]   Parameters: {"id"=>"122"}
2015-08-28 17:33:27.845237008 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:27.84529806 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:27.845319464 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:27.845337534 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:27.84534994 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 122 LIMIT 1[0m
2015-08-28 17:33:27.845364332 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.5ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 122 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:27.845423407 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:27.845453548 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:27.845467378 +0200 CEST [web-1]   [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:27.845483611 +0200 CEST [web-1] Started DELETE "/awsdocuments/122" for 88.169.99.128 at 2015-08-28 15:33:27 +0000
2015-08-28 17:33:27.845531271 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:27.845549251 +0200 CEST [web-1]   Parameters: {"id"=>"122"}
2015-08-28 17:33:27.845560732 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:27.845574532 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:27.845585827 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:27.845599574 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:27.845611021 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 122 LIMIT 1[0m
2015-08-28 17:33:27.845659787 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.4ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 122 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:27.845674672 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:27.845688733 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:27.845699802 +0200 CEST [web-1]   [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:27.845721856 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 122 LIMIT 1
2015-08-28 17:33:27.845735778 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.845787114 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:27' WHERE `awsdocuments`.`id` = 122
2015-08-28 17:33:27.845800808 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153327Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=ecc6b955168d7ed3439c5ca26bb4e6f67c9c8bdf3f77b95ef7b13907b8119f53' WHERE `awsdocuments`.`id` = 122[0m
2015-08-28 17:33:27.845815168 +0200 CEST [web-1]   [1m[35m (2.6ms)[0m  COMMIT
2015-08-28 17:33:27.845826364 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.84584335 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:27.845855878 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:27.299+00:00\"}}', `updated_at` = '2015-08-28 15:33:27' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:27.845905119 +0200 CEST [web-1]   [1m[35m (2.1ms)[0m  COMMIT
2015-08-28 17:33:27.845928675 +0200 CEST [web-1] Completed 204 No Content in 114ms (ActiveRecord: 10.9ms)
2015-08-28 17:33:27.845943883 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 122 LIMIT 1
2015-08-28 17:33:27.845955574 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.845971918 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:27' WHERE `awsdocuments`.`id` = 122
2015-08-28 17:33:27.845984135 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153327Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=ecc6b955168d7ed3439c5ca26bb4e6f67c9c8bdf3f77b95ef7b13907b8119f53' WHERE `awsdocuments`.`id` = 122[0m
2015-08-28 17:33:27.846033761 +0200 CEST [web-1]   [1m[35m (2.4ms)[0m  COMMIT
2015-08-28 17:33:27.846061135 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.846076308 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:27.846087588 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:27.385+00:00\"}}', `updated_at` = '2015-08-28 15:33:27' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:27.846101205 +0200 CEST [web-1]   [1m[35m (1.9ms)[0m  COMMIT
2015-08-28 17:33:27.846112526 +0200 CEST [web-1] Completed 204 No Content in 114ms (ActiveRecord: 9.8ms)
2015-08-28 17:33:27.846175571 +0200 CEST [web-1] [Rollbar] Success
2015-08-28 17:33:27.846217219 +0200 CEST [web-1] [Rollbar] Details: https://rollbar.com/instance/uuid?uuid=1af1426a-572e-4799-aee0-bcae18707fcc (only available if report was successful)
2015-08-28 17:33:27.846303043 +0200 CEST [web-1] [Rollbar] Exception uuid saved in env: 1af1426a-572e-4799-aee0-bcae18707fcc
2015-08-28 17:33:27.846329886 +0200 CEST [web-1] 
2015-08-28 17:33:27.846345294 +0200 CEST [web-1] NoMethodError (undefined method `chapter_id' for nil:NilClass):
2015-08-28 17:33:27.846357001 +0200 CEST [web-1]   app/controllers/awsdocuments_controller.rb:61:in `is_allowed?'
2015-08-28 17:33:27.846409822 +0200 CEST [web-1] 
2015-08-28 17:33:27.84645683 +0200 CEST [web-1] 
2015-08-28 17:33:27.846513951 +0200 CEST [web-1] Started DELETE "/awsdocuments/120" for 88.169.99.128 at 2015-08-28 15:33:27 +0000
2015-08-28 17:33:27.846571601 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:27.8466175 +0200 CEST [web-1]   Parameters: {"id"=>"120"}
2015-08-28 17:33:27.846654315 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:27.846699828 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:27.846736882 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:27.846766626 +0200 CEST [web-1]   [1m[35mOrganization Load (0.3ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:27.84677976 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 120 LIMIT 1[0m
2015-08-28 17:33:27.846794102 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.5ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 120 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:27.846805548 +0200 CEST [web-1]   [1m[36mChapter Load (0.3ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:27.846832835 +0200 CEST [web-1]   [1m[35mNode Load (0.3ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:27.846846609 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:27.846861581 +0200 CEST [web-1] Started DELETE "/awsdocuments/120" for 88.169.99.128 at 2015-08-28 15:33:27 +0000
2015-08-28 17:33:27.846873529 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:27.846887408 +0200 CEST [web-1]   Parameters: {"id"=>"120"}
2015-08-28 17:33:27.846899227 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:27.846913308 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:27.846925129 +0200 CEST [web-1]   [1m[35mOrganization Exists (0.4ms)[0m  SELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1
2015-08-28 17:33:27.846939087 +0200 CEST [web-1]   [1m[36mOrganization Load (0.3ms)[0m  [1mSELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1[0m
2015-08-28 17:33:27.846950761 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.4ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 120 LIMIT 1
2015-08-28 17:33:27.847016658 +0200 CEST [web-1]   [1m[36mAwsdocument Load (0.3ms)[0m  [1mSELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 120 AND `awsdocuments`.`archived` = 0 LIMIT 1[0m
2015-08-28 17:33:27.847052637 +0200 CEST [web-1]   [1m[35mChapter Load (0.3ms)[0m  SELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1
2015-08-28 17:33:27.847076524 +0200 CEST [web-1]   [1m[36mNode Load (0.3ms)[0m  [1mSELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1[0m
2015-08-28 17:33:27.847089918 +0200 CEST [web-1]   [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1
2015-08-28 17:33:27.847103928 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 120 LIMIT 1
2015-08-28 17:33:27.847121023 +0200 CEST [web-1]   [1m[36m (0.3ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.847187121 +0200 CEST [web-1]   [1m[35mSQL (0.5ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:27' WHERE `awsdocuments`.`id` = 120
2015-08-28 17:33:27.847202305 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__4th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153327Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=60d8b6b92c23a537c53be68733ee88a59239b15411ed5964a7b53a824601ad82' WHERE `awsdocuments`.`id` = 120[0m
2015-08-28 17:33:27.84721622 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:27.847227318 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:27.847243326 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:27.847255581 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:27.747+00:00\"}}', `updated_at` = '2015-08-28 15:33:27' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:27.847285538 +0200 CEST [web-1]   [1m[35m (2.2ms)[0m  COMMIT
2015-08-28 17:33:27.847311021 +0200 CEST [web-1] Completed 204 No Content in 114ms (ActiveRecord: 9.8ms)
2015-08-28 17:33:27.84732592 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 120 LIMIT 1[0m
2015-08-28 17:33:27.847337272 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:27.847351102 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:27' WHERE `awsdocuments`.`id` = 120[0m
2015-08-28 17:33:27.847362491 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__4th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153327Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=60d8b6b92c23a537c53be68733ee88a59239b15411ed5964a7b53a824601ad82' WHERE `awsdocuments`.`id` = 120
2015-08-28 17:33:27.847376324 +0200 CEST [web-1]   [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:27.847387726 +0200 CEST [web-1]   [1m[35m (0.3ms)[0m  BEGIN
2015-08-28 17:33:27.847403222 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE[0m
2015-08-28 17:33:27.847431458 +0200 CEST [web-1]   [1m[35mSQL (0.4ms)[0m  UPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:27.825+00:00\"}}', `updated_at` = '2015-08-28 15:33:27' WHERE `users`.`id` = 11
2015-08-28 17:33:27.847452876 +0200 CEST [web-1]   [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
2015-08-28 17:33:27.847464737 +0200 CEST [web-1] Completed 204 No Content in 114ms (ActiveRecord: 8.9ms)
2015-08-28 17:33:28.847608354 +0200 CEST [web-1] Started DELETE "/awsdocuments/119" for 88.169.99.128 at 2015-08-28 15:33:28 +0000
2015-08-28 17:33:28.847697117 +0200 CEST [web-1] Processing by AwsdocumentsController#destroy as JSON
2015-08-28 17:33:28.847722109 +0200 CEST [web-1]   Parameters: {"id"=>"119"}
2015-08-28 17:33:28.847750095 +0200 CEST [web-1] Can't verify CSRF token authenticity
2015-08-28 17:33:28.847778238 +0200 CEST [web-1] Geokit is using the domain: unisphere.eu
2015-08-28 17:33:28.847791772 +0200 CEST [web-1]   [1m[36mOrganization Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber' LIMIT 1[0m
2015-08-28 17:33:28.847807423 +0200 CEST [web-1]   [1m[35mOrganization Load (0.4ms)[0m  SELECT  `organizations`.* FROM `organizations` WHERE `organizations`.`subdomain` = 'lycee-kleber'  ORDER BY `organizations`.`id` ASC LIMIT 1
2015-08-28 17:33:28.847826661 +0200 CEST [web-1]   [1m[36mAwsdocument Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`id` = 119 LIMIT 1[0m
2015-08-28 17:33:28.847842559 +0200 CEST [web-1]   [1m[35mAwsdocument Load (0.5ms)[0m  SELECT  `awsdocuments`.* FROM `awsdocuments` WHERE `awsdocuments`.`id` = 119 AND `awsdocuments`.`archived` = 0 LIMIT 1
2015-08-28 17:33:28.847854705 +0200 CEST [web-1]   [1m[36mChapter Load (0.4ms)[0m  [1mSELECT  `chapters`.* FROM `chapters` WHERE `chapters`.`id` = 216 LIMIT 1[0m
2015-08-28 17:33:28.847909522 +0200 CEST [web-1]   [1m[35mNode Load (0.4ms)[0m  SELECT  `nodes`.* FROM `nodes` WHERE `nodes`.`id` = 174 LIMIT 1
2015-08-28 17:33:28.847927613 +0200 CEST [web-1]   [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`uid` = 'gabriel@muller.uk.net' LIMIT 1[0m
2015-08-28 17:33:28.847942201 +0200 CEST [web-1]   [1m[35mAwsdocument Exists (0.6ms)[0m  SELECT  1 AS one FROM `awsdocuments` WHERE `awsdocuments`.`user_id` = 11 AND `awsdocuments`.`id` = 119 LIMIT 1
2015-08-28 17:33:28.847953494 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:28.847968502 +0200 CEST [web-1]   [1m[35mSQL (0.6ms)[0m  UPDATE `awsdocuments` SET `archived` = 1, `updated_at` = '2015-08-28 15:33:28' WHERE `awsdocuments`.`id` = 119
2015-08-28 17:33:28.847995967 +0200 CEST [web-1]   [1m[36mSQL (0.4ms)[0m  [1mUPDATE `awsdocuments` SET `awsdocuments`.`url` = 'https://unisphere.s3-eu-central-1.amazonaws.com/DIAPOSITIVE1__5th_copy_.PNG?X-Amz-Expires=604800&X-Amz-Date=20150828T153328Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIHURXGDEFIFZNGEQ/20150828/eu-central-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=ea8a7d2653d25a2f23e0b86b72866e9db863d43b9d8f9f07a57479cf32fd0f5a' WHERE `awsdocuments`.`id` = 119[0m
2015-08-28 17:33:28.848037309 +0200 CEST [web-1]   [1m[35m (2.1ms)[0m  COMMIT
2015-08-28 17:33:28.848051236 +0200 CEST [web-1]   [1m[36m (0.4ms)[0m  [1mBEGIN[0m
2015-08-28 17:33:28.848065898 +0200 CEST [web-1]   [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 11 LIMIT 1 FOR UPDATE
2015-08-28 17:33:28.848077185 +0200 CEST [web-1]   [1m[36mSQL (0.5ms)[0m  [1mUPDATE `users` SET `tokens` = '{\"4jDYe-zx7zIKl71VIak_Xw\":{\"token\":\"$2a$10$81BB.aOwm2JmhPsut6G7Lun5cbc/ibeKFjmi/iW37VjCRa7h50gq2\",\"expiry\":1503934405,\"last_token\":\"$2a$10$jlIMukF3NxPuyiIWwaArtODTWzYZ0vx9ahIMhBwgjGYUsd7LG2gSy\",\"updated_at\":\"2015-08-28T15:33:28.202+00:00\"}}', `updated_at` = '2015-08-28 15:33:28' WHERE `users`.`id` = 11[0m
2015-08-28 17:33:28.848107234 +0200 CEST [web-1]   [1m[35m (1.8ms)[0m  COMMIT
2015-08-28 17:33:28.848156707 +0200 CEST [web-1] Completed 204 No Content in 114ms (ActiveRecord: 10.3ms)
